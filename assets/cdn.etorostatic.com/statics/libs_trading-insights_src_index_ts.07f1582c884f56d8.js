"use strict";(self.webpackChunketoro=self.webpackChunketoro||[]).push([["libs_trading-insights_src_index_ts"],{34610:(uo,ne,c)=>{c.r(ne),c.d(ne,{EconomicCalendarResolverComponent:()=>vo,EconomicCalendarResolverModule:()=>Oe.u,EtoroTradingInsightsModule:()=>De._});var De=c(52220),Oe=c(86212),e=c(37580),N=c(34727),d=c(60316),Pe=c(4549),L=c(20037),Te=c(84205),X=c(19999),g=c(70271),x=c(98764),oe=c(61318),G=c(59452),T=c(35157),re=c(60336),Y=c(47050),ae=c(22453),h=c(72597);function ie(n,a,r=0){const t=n.nativeElement.querySelectorAll(a),o=null!=t&&t.length?t[t.length-1]:void 0;o&&se(o,r)}function se(n,a){const r=n.style.position,t=n.style.top;n.style.position="relative",n.style.top=`${a}px`,n.scrollIntoView({behavior:"smooth",block:"start"}),n.style.top=t,n.style.position=r}var F=c(50300),I=c(35865),we=c(3708),le=c(14275),y=c(70785),U=c(67476),z=c(75797),R=c(61873),H=c(36647),ce=c(95429),s=function(n){return n.Dividend="dividend",n.ExDividend="ex-dividend",n.Earnings="earnings",n.Other="other",n}(s||{}),p=function(n){return n.BeforeMarket="Before Market",n.AfterMarket="After Market",n.Unspecified="Unspecified",n}(p||{}),u=function(n){return n.Portfolio="Portfolio",n.PopularStocks="PopularStocks",n.Watchlists="Watchlists",n}(u||{});const W={[s.Dividend]:n=>n.topPayingDividendsOfPopularStocksInstrumentIds,[s.ExDividend]:n=>n.topPayingDividendsOfPopularStocksInstrumentIds,[s.Earnings]:n=>n.topPopularStocksInstrumentIds};var f=function(n){return n.Stock="Stock",n.Etf="ETF",n.Other="Other",n}(f||{}),de=c(27419),Q=c(69529),Fe=c(23477);function ve(n,a,r){return{start:new Date(r),title:`${n.instrumentId}`,type:a,allDay:!0,instrumentId:n.instrumentId,eventTime:p.Unspecified,dividendAmount:n.originalCurrencyAmount,currency:n.originalCurrency,assetType:f.Stock}}function Ye(n){if(n.nextEarningDate)return{start:new Date(n.nextEarningDate),title:`${n.instrumentId}`,type:s.Earnings,allDay:!0,instrumentId:n.instrumentId,eventTime:n.nextEarningTime,assetType:f.Stock}}function Ue(n){return(0,y.A)([n.q1EarningDate,n.q2EarningDate,n.q3EarningDate,n.q4EarningDate],t=>{if(t)return{start:new Date(t),title:`${n.instrumentId}`,type:s.Earnings,allDay:!0,instrumentId:n.instrumentId,eventTime:p.Unspecified,assetType:f.Stock}}).filter(t=>t)}function me(n,a,r,t){return{instrumentId:n,start:new Date(t),title:`${n}`,type:r,allDay:!0,eventTime:p.Unspecified,dividendAmount:a.DividendAmount,currency:a.Currency,assetType:f.Stock}}const ge="/sapi/economic-events",ze=`${ge}/eod-events`,He=`${ge}/dividends`;var w=c(46443);let We=(()=>{var n;class a{constructor(t){this.httpClient=t}getDividendDates(t){const o=this.httpClient.get(`/sapi/instrumentsinfo/instruments/filtered/dividends?pageSize=0&instrumentId=${t.join(",")}`),i=this.httpClient.get(`/sapi/instrumentsinfo/Instruments?pageSize=0&fields=instrumentId,displayname,lastXDividendDate,dividendPayDate,originalCurrency,dividendStatus,dividendPayDate,xDividend,daystilldividendXdate,dividendAnnouncementDate,dividendRecordDate,dividendFrequency,originalCurrencyAmount&isInternalInstrument=false&isDelisted=false&internalAssetClassName=Stocks&instrumentId=${t.join(",")}`);return(0,R.p)([o,i]).pipe((0,g.T)(([l,v])=>(0,U.A)([...l.items,...v.items],m=>`${m.dividendPayDate}-${m.instrumentId}`)),(0,g.T)(l=>(0,y.A)(l,v=>this.dividendDatesResponseToEconomicEvent(v))))}dividendDatesResponseToEconomicEvent(t){return t.lastXDividendDate&&t.dividendPayDate?[ve(t,s.Dividend,t.dividendPayDate),ve(t,s.ExDividend,t.lastXDividendDate)]:[]}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),Qe=(()=>{var n;class a{constructor(t){this.httpClient=t}getEarningDates(t){const o=this.httpClient.get(`/sapi/instrumentsinfo/Instruments?fields=NextEarningDate,nextEarningDateType,NextEarningTime,NextEarningsDateQuarter,Currency=currency-Annual&sort=daysTillNextEarningReport,-marketcapitalization-annual&DaysTillNextEarningReportmin=0&IsDelisted=false&pageSize=0&internalAssetClassName=Stocks&instrumentId=${t.join(",")}`),i=this.httpClient.get(`/sapi/instrumentsinfo/instruments/?fields=q1EarningDate,q2EarningDate,q3EarningDate,q4EarningDate,instrumentId,nextEarningDateType&internalAssetClassName=Stocks&pageSize=0&instrumentId=${t.join(",")}`);return(0,R.p)([o,i]).pipe((0,x.M)(([l,v])=>this.getTentativeStatus(l)),(0,g.T)(([l,v])=>function Ne(n,a){return[...n.items.map(Ye).filter(o=>o),...(0,y.A)(a.items,Ue)]}(l,v)),(0,g.T)(l=>this.dedupEvents(l)),(0,g.T)(l=>l.map(v=>({...v,isTentative:this._instrumentEarningDateTentativeStatus[this.getUniqueIdFromCalendarEvent(v)]||!1}))))}getTentativeStatus(t){this._instrumentEarningDateTentativeStatus=t.items.reduce((o,i)=>(o[this.getUniqueIdFromResponse(i)]="T"===i.nextEarningDateType,o),{})}dedupEvents(t){return(0,U.A)(t,o=>this.getUniqueIdFromCalendarEvent(o))}getUniqueIdFromResponse(t){const o=new Date(t.nextEarningDate);return`${o.getMonth()}-${o.getFullYear()}-${t.instrumentId}`}getUniqueIdFromCalendarEvent(t){return`${t.start.getMonth()}-${t.start.getFullYear()}-${t.instrumentId}`}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),Je=(()=>{var n;class a{constructor(t){this.httpClient=t}getPopularStocks(){return this.httpClient.get("/sapi/instrumentsinfo/Instruments?fields=instrumentId,popularityUniques-System-RankAsc,dividendRate-Annual&PopularityUniques-System-RankAscMin=1&PopularityUniques-System-RankAscMax=280&pageSize=0&internalAssetClassName=Stocks&sort=popularityUniques-System-RankAsc&isInternalInstrument=false&isDelisted=false").pipe((0,g.T)(t=>t.items.map(o=>this.adaptRawResponse(o))),(0,g.T)(t=>function $e(n){const a=n.slice(0,25),t=(0,Fe.A)(n.filter(o=>o.dividendRateAnnual>2),o=>o.dividendRateAnnual).slice(0,25);return{topPopularStocksInstrumentIds:a.map(o=>o.instrumentId),topPayingDividendsOfPopularStocksInstrumentIds:t.map(o=>o.instrumentId)}}(t)))}adaptRawResponse(t){return{instrumentId:t.instrumentId,dividendRateAnnual:t["dividendRate-Annual"],popularityUniquesSystemRankAsc:t["popularityUniques-System-RankAsc"]}}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),Ke=(()=>{var n;class a{constructor(t){this.httpClient=t}getHistoricDividendDates(t){return this.httpClient.get(`/sapi/instrumentsinfo/instruments/?fields=historicdividends&internalAssetClassName=Stocks&pageSize=0&instrumentId=${t.join(",")}`).pipe((0,g.T)(i=>function Re({items:n}){const a=n.filter(t=>!!t.historicDividends).map(t=>({instrumentId:t.instrumentId,historicDividends:t.historicDividends}));return(0,y.A)(a,t=>t.historicDividends.reduce((o,i)=>[...o,me(t.instrumentId,i,s.Dividend,i.PayDate),me(t.instrumentId,i,s.ExDividend,i.ExDate)],[]))}(i)),(0,g.T)(i=>(0,U.A)(i,l=>`${l.instrumentId}-${l.start}`)))}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var pe=c(77078),Ze=c(20855),qe=c(50049);let et=(()=>{var n;class a{constructor(t){this.watchlistsService=t}getWatchlistsInstruments(){return(0,ce.H)(this.watchlistsService.init()).pipe((0,g.T)(t=>t.map(o=>o.Instruments).reduce((o,i)=>[...o,...i],[])))}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(qe.PW))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),tt=(()=>{var n;class a{constructor(t,o){this.httpClient=t,this.config=o}getMarketEvents(){return this.config.dynamics.tradingInsights.calendarConfig.otherEvents?this.httpClient.get(ze).pipe((0,g.T)(t=>function Ge(n){return n.calendarEvents.map(a=>({instrumentId:a.instrumentId,start:new Date(a.date),title:a.type,type:s.Other,allDay:!0,eventTime:p.Unspecified,country:a.country,name:a.name,assetType:f.Stock}))}(t))):(0,G.of)([])}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq),e.KVO(N.R))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),nt=(()=>{var n;class a{constructor(t){this.httpClient=t}getDividendDates(t){return t.instruments.length?this.httpClient.post(He,t).pipe((0,g.T)(o=>o.events),(0,g.T)(o=>(0,y.A)(o,i=>this.dividendDatesResponseBodyToEconomicEvent(i)))):(0,G.of)([])}dividendDatesResponseBodyToEconomicEvent(t){return t.exDividendDate&&t.dividendPaymentDate?[{instrumentId:t.instrumentId,start:new Date(t.dividendPaymentDate),type:s.Dividend,title:`${t.instrumentId}`,allDay:!0,eventTime:p.Unspecified,dividendAmount:t.value,currency:t.currency,assetType:f.Etf},{instrumentId:t.instrumentId,start:new Date(t.exDividendDate),type:s.ExDividend,title:`${t.instrumentId}`,allDay:!0,eventTime:p.Unspecified,dividendAmount:t.value,currency:t.currency,assetType:f.Etf}]:[]}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(w.Qq))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),ot=(()=>{var n;class a{constructor(t,o,i,l,v,m,M,C,P,k,S){this.config=t,this.dividendsProvider=o,this.earningsProvider=i,this.popularStocksProvider=l,this.historicDividendsProvider=v,this.portfolioFacade=m,this.instrumentsService=M,this.watchlistsProvider=C,this.eodProvider=P,this.loggerService=k,this.eodDividendsProvider=S,this.defaultChunkSize=100;const E=this.config.dynamics.tradingInsights.calendarConfig.chunkSize;this._chunkSize=!E||E<=0?this.defaultChunkSize:E}init(t){this._selectedYear$=new z.t(t.getFullYear()),this.initInstrumentsMapping(),this.initCalendarFilters()}getCalendarFilters(){return this._calendarFilter$.asObservable()}getInstrumentEvents(){return(0,R.p)([this.portfolioFacade.getPortfolioInstruments(),this.watchlistsProvider.getWatchlistsInstruments(),this.popularStocksProvider.getPopularStocks()]).pipe((0,g.T)(([t,o,i])=>[this.getInstrumentsOfAssetType(t,f.Stock),this.getInstrumentsOfAssetType(t,f.Etf),i,this.getInstrumentsOfAssetType(o,f.Stock),this.getInstrumentsOfAssetType(o,f.Etf)]),(0,x.M)(([t,o,i,l,v])=>{this.setUpStocksInstrumentsMapping(t,i,l),this.setUpEtfInstrumentsMapping(o,v)}),(0,H.n)(()=>(0,R.p)([this.getStockEvents(),this.getEtfEvents()])),(0,H.n)(([t,o])=>(0,X.z)([this.setDefaultFilters(this.enrichWithInstrument(this.removeDuplicates((0,F.A)([...t,...o])))),this._calendarFilter$,this._selectedYear$])),(0,g.T)(([t,o,i])=>this.filterEvents(t,o,i)))}getMarketEvents(){return this.eodProvider.getMarketEvents().pipe((0,H.n)(t=>this.enrichWithInstrument(t)),(0,oe.W)(t=>{let o=(0,G.of)([]);try{this.loggerService.error({categories:["Economic Calendar - Other Events"],message:JSON.stringify({error:t}),domain:T.SB.CustomerData})}catch{this.loggerService.error({categories:["Economic Calendar - Other Events"],message:"Failed to load other events",domain:T.SB.CustomerData})}return o}))}getInstrumentsOfAssetType(t,o){return t.map(l=>{if(this.isInstrumentRelevant(l,o)){if(o===f.Stock)return l.InstrumentID;if(o===f.Etf)return{instrumentId:l.InstrumentID,exchangeId:l.ExchangeID,symbol:l.SymbolFull}}}).filter(l=>l)}isInstrumentRelevant(t,o){return(t.IsStock&&o===f.Stock||t.IsETF&&o===f.Etf)&&!t.IsDelisted&&!t.IsInternalInstrument}setUpStocksInstrumentsMapping(t,o,i){const l=W[s.Dividend](o),v=W[s.ExDividend](o),m=W[s.Earnings](o);this._stocksInstrumentsMapping={[u.PopularStocks]:{[s.Dividend]:l,[s.ExDividend]:v,[s.Earnings]:m,[s.Other]:[]},[u.Portfolio]:{[s.Dividend]:t,[s.ExDividend]:t,[s.Earnings]:t,[s.Other]:[]},[u.Watchlists]:{[s.Dividend]:i,[s.ExDividend]:i,[s.Earnings]:i,[s.Other]:[]}}}setUpEtfInstrumentsMapping(t,o){this._etfInstrumentsMapping={[u.PopularStocks]:{[s.Dividend]:[],[s.ExDividend]:[],[s.Earnings]:[],[s.Other]:[]},[u.Portfolio]:{[s.Dividend]:t,[s.ExDividend]:t,[s.Earnings]:[],[s.Other]:[]},[u.Watchlists]:{[s.Dividend]:o,[s.ExDividend]:o,[s.Earnings]:[],[s.Other]:[]}}}getFiltersArray(t){return Object.keys(t).reduce((o,i)=>t[i]?[...o,i]:o,[])}setDefaultFilters(t){return t.pipe((0,x.M)(o=>{const i=o.filter(l=>(0,de.A)(l.start).getTime()>=(0,de.A)(new Date).getTime());if(i){const l=this.getInstrumentIdsForFilter(u.Portfolio),v=null==i?void 0:i.filter(m=>l.includes(m.instrumentId));((null==v?void 0:v.length)||0)<50&&this.setCalendarFilters([u.PopularStocks])}}))}enrichWithInstrument(t){const o=(0,I.A)(t.map(i=>i.instrumentId));return(0,ce.H)(this.instrumentsService.getInstruments(o)).pipe((0,g.T)(i=>{const l=(0,we.A)(i,v=>v.InstrumentID);return t.map(v=>{const m=l[v.instrumentId];return m&&{...v,title:v.type!==s.Other?(null==m?void 0:m.shortName)||"":v.title,instrument:m}}).filter(v=>v)}))}getStockEvents(){const t=(0,I.A)([...this.getStocksInstrumentIdsForEventType(s.Dividend),...this.getStocksInstrumentIdsForEventType(s.ExDividend)]),o=this.getStocksInstrumentIdsForEventType(s.Earnings),i=(0,le.A)(t,this._chunkSize),l=(0,le.A)(o,this._chunkSize),v=(0,y.A)(i,C=>[this.dividendsProvider.getDividendDates(C),this.historicDividendsProvider.getHistoricDividendDates(C)]),M=[...(0,y.A)(l,C=>[this.earningsProvider.getEarningDates(C)]),...v];return(0,R.p)(M).pipe((0,g.T)(C=>(0,F.A)(C)))}getEtfEvents(){const t=(0,I.A)([...this.getEtfInstrumentIdsForEventType(s.Dividend),...this.getEtfInstrumentIdsForEventType(s.ExDividend)]);return this.eodDividendsProvider.getDividendDates({instruments:t})}filterEvents(t,o,i){const l=t.filter(_=>_.start.getFullYear()===i),v=this.getFiltersArray(o),m=Object.values(s),[M,C,P]=m.map(_=>v.map(po=>this.getInstrumentIdsForEventTypeAndFilter(_,po))),k=(0,F.A)(M),S=(0,F.A)(C),E=(0,F.A)(P);return[...k&&l.filter(_=>_.type===s.Dividend&&k.includes(_.instrumentId))||[],...S&&l.filter(_=>_.type===s.ExDividend&&S.includes(_.instrumentId))||[],...E&&l.filter(_=>_.type===s.Earnings&&E.includes(_.instrumentId))||[]]}getStocksInstrumentIdsForEventType(t){const o=Object.values(u);return(0,I.A)((0,y.A)(o,i=>this._stocksInstrumentsMapping[i][t]))}getEtfInstrumentIdsForEventType(t){const o=Object.values(u);return(0,I.A)((0,y.A)(o,i=>this._etfInstrumentsMapping[i][t]))}getInstrumentIdsForFilter(t){const o=Object.values(s);return(0,I.A)((0,y.A)(o,i=>this.getInstrumentIdsForEventTypeAndFilter(i,t)))}getInstrumentIdsForEventTypeAndFilter(t,o){var i,l;return[...(null===(i=this._stocksInstrumentsMapping[o])||void 0===i?void 0:i[t])||[],...((null===(l=this._etfInstrumentsMapping[o])||void 0===l?void 0:l[t])||[]).map(v=>v.instrumentId)]}setCalendarFilters(t){const o=this._calendarFilter$.value;t.forEach(i=>{o[i]=!o[i]}),this._calendarFilter$.next({...o})}setSelectedYear(t){this._selectedYear$.next(t)}removeDuplicates(t){return(0,U.A)(t,o=>`${o.instrumentId}-${o.type}-${o.start.getMonth()}-${o.start.getFullYear()}-${o.start.getDate()}`)}initInstrumentsMapping(){this._stocksInstrumentsMapping={},this._etfInstrumentsMapping={}}initCalendarFilters(){this._calendarFilter$=new z.t({[u.Portfolio]:!0,[u.PopularStocks]:!1,[u.Watchlists]:!1})}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(N.R),e.KVO(We),e.KVO(Qe),e.KVO(Je),e.KVO(Ke),e.KVO(pe.K),e.KVO(Ze.u),e.KVO(et),e.KVO(tt),e.KVO(Q.g),e.KVO(nt))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var ue=c(72777),he=c(80461),rt=c(65556);let j=(()=>{var n;class a{constructor(){this.maxNumberOfEventsToShow=5,this._expandedWeeks$=new z.t([])}resetAll(){this._expandedWeeks$.next([])}getWeekId(t){return(0,rt.A)(t.date).getTime()}expandWeek(t){this._expandedWeeks$.next([...this._expandedWeeks$.value,t])}observe(){return this._expandedWeeks$.asObservable()}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var at=c(62679),it=c(26895),st=c(12876),J=c(53280),B=c(6360),lt=c(9124),ct=c(24191);let fe=(()=>{var n;class a{constructor(){const t=new Date;this.today={year:t.getFullYear(),month:t.getMonth()},this.selectedYear=this.today.year,this.selectedMonth=this.today.month}updateSelection(t,o){this.selectedYear=o,this.selectedMonth=t}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),$=(()=>{var n;class a{constructor(t,o,i){this.analyticsService=t,this.monthPickerService=o,this.showMoreService=i,this._simpleDateFormat="yyyy-MM-dd",this._instrumentTypeIdToName={5:"Stocks",6:"Etf",2:"Commodities",10:"Crypto Currencies",1:"Currencies",4:"Indices"}}onCalendarLoad(){const t=this.getCalendarDates();this.analyticsService.eventTrack("Economic Calendar - Page View",{"Calendar Items Shown":this.getEventsShownTitles(),"Calendar Number of Items":this._events.length,"Calendar Items Shown Type":this.getEventsShownType(),"Calendar Instruments Shown Type":this.getInstrumentsShownType(),"Calendar Market Events Type":this.getMarketEventType(),"Calendar Market Events Market Status":this.getMarketEventsMarketStatus(),"Calendar Market Events Dates":this.getMarketEventsDates(),"Calendar Market Events Show More Status":this.getShowMoreStatus(),"Calendar Date From":t.from,"Calendar Date To":t.to,"Calendar Filters":this.getListOfActivatedFilters()})}onFilterClicked(t){const o=this.getCalendarDates();this.analyticsService.eventTrack("Economic Calendar - Item Clicked",{"Element Name":"Calendar Filters","Element Subname":t,"Calendar Items Shown":this.getEventsShownTitles(),"Calendar Items Shown Type":this.getEventsShownType(),"Calendar Number of Items":this._events.length,"Calendar Instruments Shown Type":this.getInstrumentsShownType(),"Calendar Market Events Type":this.getMarketEventType(),"Calendar Market Events Market Status":this.getMarketEventsMarketStatus(),"Calendar Market Events Dates":this.getMarketEventsDates(),"Calendar Market Events Show More Status":this.getShowMoreStatus(),"Calendar Date From":o.from,"Calendar Date To":o.to,"Calendar Filters":this.getListOfActivatedFilters()})}onShowMoreClicked(t){const o=this.getCalendarDates();this.analyticsService.eventTrack("Economic Calendar - Item Clicked",{"Element Name":"Calendar","Element Subname":"More Events","More Events Number of Items":t,"Calendar Items Shown":this.getEventsShownTitles(),"Calendar Number of Items":this._events.length,"Calendar Date From":o.from,"Calendar Date To":o.to,"Calendar Filters":this.getListOfActivatedFilters()})}onTradeClicked(t){this.analyticsService.eventTrack("Economic Calendar Market Event Details - Button Clicked",{"Card Name":"Economic Calendar Market Event Details","Button Text":"Trade","Item ID":t.instrumentId,"Item Name":this.getItemName(t),"Item Type":"Instrument","Instrument Symbol":t.instrument.SymbolFull,"Item Return":this.getItemReturn(t),"Instrument Type":this.getInstrumentTypeName(t.economicCalendarEvent),"Calendar Market Event Date":t.eventDate,"Calendar Market Event Type":t.type,"Calendar Market Event Market Status":t.economicCalendarEvent.eventTime||p.Unspecified})}onEconomicEventClicked(t){this.onEconomicEventClickedCard(t),this.onEconomicEventClickedItemClicked(t)}onMonthPickerOpened(){this.onDropDownOrTodayPillClicked("Calendar Date")}onTodayPillCicked(){this.onDropDownOrTodayPillClicked("Today")}onMonthSelected(){const t=this.getCalendarDates();this.analyticsService.eventTrack("Economic Calendar - Item Clicked",{"Element Name":"Calendar Date Dropdown","Element Subname":"Date","Calendar Date Dropdown Selected Date":t.from,"Calendar Date Dropdown Type":"Monthly","Calendar Items Shown":this.getEventsShownTitles(),"Calendar Number of Items":this._events.length,"Calendar Items Shown Type":this.getEventsShownType(),"Calendar Instruments Shown Type":this.getInstrumentsShownType(),"Calendar Market Events Type":this.getMarketEventType(),"Calendar Market Events Market Status":this.getMarketEventsMarketStatus(),"Calendar Market Events Dates":this.getMarketEventsDates(),"Calendar Market Events Show More Status":this.getShowMoreStatus(),"Calendar Date From":t.from,"Calendar Date To":t.to,"Calendar Filters":this.getListOfActivatedFilters()})}setFilters(t){this._filters=t}setEvents(t){this._events=(0,it.A)(t.filter(o=>o.start.getMonth()===this.monthPickerService.selectedMonth&&o.start.getFullYear()===this.monthPickerService.selectedYear),o=>o.start)}setIsMobile(t){this._isMobile=t}onDropDownOrTodayPillClicked(t){this.analyticsService.eventTrack("Economic Calendar - Item Clicked",{"Element Name":t,"Element Subname":"Date Dropdown","Calendar Number of Items":this._events.length})}onEconomicEventClickedCard(t){this.analyticsService.eventTrack("Economic Calendar Market Event Details - Card View",{"Card Name":"Economic Calendar Market Event Details","Item ID":t.instrumentId,"Item Name":this.getItemName(t),"Item Type":"Instrument","Instrument Symbol":t.instrument.SymbolFull,"Instrument Type":this.getInstrumentTypeName(t.economicCalendarEvent),"Item Return":this.getItemReturn(t),"Calendar Market Event Date":this.getLocalIsoTime(t.economicCalendarEvent.start),"Calendar Market Event Type":t.type,"Calendar Market Event Market Status":t.economicCalendarEvent.eventTime||p.Unspecified})}onEconomicEventClickedItemClicked(t){const o=this.getCalendarDates();this.analyticsService.eventTrack("Economic Calendar - Item Clicked",{"Element Name":"Calendar","Element Subname":"Market Event","Item ID":t.instrumentId,"Item Name":this.getItemName(t),"Item Type":"Instrument","Instrument Symbol":t.instrument.SymbolFull,"Instrument Type":this.getInstrumentTypeName(t.economicCalendarEvent),"Calendar Market Event Type":t.type,"Calendar Market Event Market Status":t.economicCalendarEvent.eventTime||p.Unspecified,"Calendar Market Event Date":this.getLocalIsoTime(t.economicCalendarEvent.start),"Calendar Items Shown":this.getEventsShownTitles(),"Calendar Number of Items":this._events.length,"Calendar Date From":o.from,"Calendar Date To":o.to,"Calendar Filters":this.getListOfActivatedFilters()})}getEventsShownTitles(){return this._events.map(t=>t.type!==s.Other?t.title:t.instrument.SymbolFull)}getEventsShownType(){return this._events.map(t=>"Instrument")}getInstrumentsShownType(){return this._events.map(t=>this.getInstrumentTypeName(t))}getInstrumentTypeName(t){return this._instrumentTypeIdToName[t.instrument.InstrumentTypeID]||"Unknown"}getMarketEventType(){return this._events.map(t=>t.type)}getMarketEventsMarketStatus(){return this._events.map(t=>(null==t?void 0:t.eventTime)||p.Unspecified)}getItemName(t){return t.instrument.fullName||t.instrument.DisplayName}getShowMoreStatus(){if(this._isMobile)return this._events.map(o=>"Disabled");const t=(0,st.A)(this._events,o=>`${o.start.getFullYear()}-${o.start.getMonth()}-${o.start.getDate()}`);return(0,y.A)(Object.keys(t),o=>{let i=[],l=[];return t[o].length>this.showMoreService.maxNumberOfEventsToShow?(i=(0,J.A)(0,this.showMoreService.maxNumberOfEventsToShow-1).map(v=>"Disabled"),l=(0,J.A)(0,t[o].length-this.showMoreService.maxNumberOfEventsToShow+1).map(v=>"Enabled")):i=(0,J.A)(0,t[o].length).map(v=>"Disabled"),[...i,...l]})}getCalendarDates(){const t=new Date(this.monthPickerService.selectedYear,this.monthPickerService.selectedMonth,1);return{from:(0,B.A)(t,this._simpleDateFormat),to:(0,B.A)((0,lt.A)(t),this._simpleDateFormat)}}getMarketEventsDates(){return this._events.map(t=>this.getLocalIsoTime(t.start))}getListOfActivatedFilters(){return Object.keys(this._filters).map(t=>{if(this._filters[t])return t}).filter(t=>t)}getItemReturn(t){return parseFloat(t.instrument.rate.Change.askPercent("Daily").toFixed(2))}getLocalIsoTime(t){return(0,B.A)(t,this._simpleDateFormat)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(ct.c),e.KVO(fe),e.KVO(j))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var Ce=c(82380),D=c(4668);let dt=(()=>{var n;class a extends D.jc{monthViewColumnHeader({date:t,locale:o}){return(0,d.Yq)(t,"EEE",o)}monthViewTitle({date:t,locale:o}){return(0,d.Yq)(t,"MMM y",o)}}return(n=a).\u0275fac=function(){let r;return function(o){return(r||(r=e.xGo(n)))(o||n)}}(),n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac}),a})();var vt=c(65669),O=c(47172),K=c(31542);function _e(n){return{eventDate:n.start.toISOString(),eventQuarter:mt(n.type,n.start),eventYear:gt(n.type,n.start),instrument:null==n?void 0:n.instrument,instrumentId:n.instrumentId,isBeforeMarketOpen:(null==n?void 0:n.eventTime)===p.BeforeMarket,type:n.type,economicCalendarEvent:n}}function mt(n,a){return n===s.Earnings?function pt(n){const a=Z(n);return 1===a?4:a-1}(a):Z(a)}function gt(n,a){return n===s.Earnings?function ut(n){const a=Z(n),r=ye(n);return 1===a?r-1:r}(a):ye(a)}function ye(n){return n.getFullYear()}function Z(n){return Math.floor(n.getMonth()/3+1)}var ht=c(61551),Me=c(21060),ft=c(49452),be=c(37192),ke=c(3247),Ct=c(61235);const _t=function(n,a){return{"et-negative":n,"et-positive":a}};let yt=(()=>{var n;class a{constructor(t){this.location=t}isOtherEvent(){return this.eventData.economicCalendarEvent.type===s.Other}navigate(t){this.location.go(t)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(d.aZ))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-instrument-event-info"]],inputs:{eventData:"eventData"},decls:24,vars:31,consts:[[1,"info-container"],[1,"left-info"],[1,"avatar-wrapper",3,"click"],["automation-id","market-events-market-avatar",1,"et-avatar","et-avatar-m",3,"tradeItem"],[1,"avatar-info"],["automation-id","market-events-market-symbol",1,"symbol"],["automation-id","market-events-market-name",1,"name"],[1,"right-info"],["automation-id","market-events-market-rate",1,"day-rate"],[1,"day-change",3,"ngClass"],["automation-id","market-events-market-change"],["automation-id","market-event-change-percent",1,"change-percent"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.bIt("click",function(){return o.navigate(null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.Url)}),e.nrm(3,"et-portfolio-avatar",3),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.EFF(6),e.k0s(),e.j41(7,"div",6),e.EFF(8),e.k0s()()(),e.j41(9,"div",7)(10,"div",8),e.EFF(11),e.nI1(12,"oldFormatRate"),e.k0s(),e.j41(13,"div",9),e.nI1(14,"instrumentRate"),e.nI1(15,"instrumentRate"),e.j41(16,"div",10),e.EFF(17),e.nI1(18,"toFixed"),e.nI1(19,"instrumentRate"),e.k0s(),e.j41(20,"div",11),e.EFF(21),e.nI1(22,"percentageParser"),e.nI1(23,"instrumentRate"),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("tradeItem",null==o.eventData?null:o.eventData.instrument),e.R7$(3),e.JRh(null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.SymbolFull),e.R7$(2),e.JRh(null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.DisplayName),e.R7$(3),e.JRh(e.i5U(12,7,null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.lastPrice(),null==o.eventData?null:o.eventData.instrument)),e.R7$(2),e.Y8G("ngClass",e.l_i(28,_t,e.i5U(14,10,null==o.eventData?null:o.eventData.instrument,"Daily")<0,e.i5U(15,13,null==o.eventData?null:o.eventData.instrument,"Daily")>=0)),e.R7$(4),e.SpI(" ",e.i5U(18,16,e.i5U(19,19,null==o.eventData?null:o.eventData.instrument,"Daily"),null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.Precision)," "),e.R7$(4),e.SpI(" (",e.bMT(22,22,e.brH(23,24,null==o.eventData?null:o.eventData.instrument,"Daily",!0)),") "))},dependencies:[d.YU,Me.R,ft.G,be.X,ke.Q,Ct.o],styles:['.et-color-primary[_ngcontent-%COMP%]{color:var(--brand-hover-action-text)}.et-bg-primary[_ngcontent-%COMP%]{background-color:var(--brand-hover-action-text)}.et-color-primary-lighter-1[_ngcontent-%COMP%]{color:var(--primary-40)}.et-bg-primary-lighter-1[_ngcontent-%COMP%]{background-color:var(--primary-40)}.et-color-primary-lighter-2[_ngcontent-%COMP%]{color:var(--positive-tertiary-bg)}.et-bg-primary-lighter-2[_ngcontent-%COMP%]{background-color:var(--positive-tertiary-bg)}.et-color-primary-lighter-3[_ngcontent-%COMP%]{color:var(--positive-forthiary-bg)}.et-bg-primary-lighter-3[_ngcontent-%COMP%]{background-color:var(--positive-forthiary-bg)}.et-color-primary-variant[_ngcontent-%COMP%]{color:var(--primary-var-70)}.et-bg-primary-variant[_ngcontent-%COMP%]{background-color:var(--primary-var-70)}.et-color-primary-variant-lighter-1[_ngcontent-%COMP%]{color:var(--brand-var-hover-action-text)}.et-bg-primary-variant-lighter-1[_ngcontent-%COMP%]{background-color:var(--brand-var-hover-action-text)}.et-color-primary-variant-lighter-2[_ngcontent-%COMP%]{color:var(--negative-tertiary-bg)}.et-bg-primary-variant-lighter-2[_ngcontent-%COMP%]{background-color:var(--negative-tertiary-bg)}.et-color-primary-variant-lighter-3[_ngcontent-%COMP%]{color:var(--negative-forthiary-bg)}.et-bg-primary-variant-lighter-3[_ngcontent-%COMP%]{background-color:var(--negative-forthiary-bg)}.et-color-secondary[_ngcontent-%COMP%]{color:var(--secondary-100)}.et-bg-secondary[_ngcontent-%COMP%]{background-color:var(--secondary-100)}.et-color-secondary-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-100-hover)}.et-bg-secondary-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-100-hover)}.et-color-secondary-lighter-2[_ngcontent-%COMP%]{color:#c9e5fc}.et-bg-secondary-lighter-2[_ngcontent-%COMP%]{background-color:#c9e5fc}.et-color-secondary-lighter-3[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-secondary-lighter-3[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-background[_ngcontent-%COMP%]{color:var(--info-hover-action-text)}.et-bg-background[_ngcontent-%COMP%]{background-color:var(--info-hover-action-text)}.et-color-background-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-background-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-background-lighter-2[_ngcontent-%COMP%]{color:var(--static-neutral-40)}.et-bg-background-lighter-2[_ngcontent-%COMP%]{background-color:var(--static-neutral-40)}.et-color-background-lighter-3[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-background-lighter-3[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-black[_ngcontent-%COMP%]{color:var(--primary-neutral-text)}.et-bg-black[_ngcontent-%COMP%]{background-color:var(--primary-neutral-text)}.et-color-dark-grey[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-dark-grey[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-grey[_ngcontent-%COMP%]{color:var(--tertiary-neutral-text)}.et-bg-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-neutral-text)}.et-color-lighter-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-lighter-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-hover-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-hover-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-whiter-grey[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-whiter-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-white[_ngcontent-%COMP%]{color:var(--neutral-secondary-bg)}.et-bg-white[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-bg)}.et-color-dark-blue[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-dark-blue[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-new-positive[_ngcontent-%COMP%]{color:var(--positive-text)}.et-bg-new-positive[_ngcontent-%COMP%]{background-color:var(--positive-text)}[_nghost-%COMP%]{display:block;flex:1;overflow:hidden}.china-product[_nghost-%COMP%]   .day-change.et-positive[_ngcontent-%COMP%]:before, .china-product   [_nghost-%COMP%]   .day-change.et-positive[_ngcontent-%COMP%]:before{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid var(--negative-text)}.china-product[_nghost-%COMP%]   .day-change.et-negative[_ngcontent-%COMP%]:before, .china-product   [_nghost-%COMP%]   .day-change.et-negative[_ngcontent-%COMP%]:before{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid var(--positive-text)}.info-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-inline:30px;padding-block:25px;overflow:hidden}.right-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.day-change[_ngcontent-%COMP%]{font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:.75rem;letter-spacing:-.2px;letter-spacing:-.21px;display:flex;flex-direction:row}.day-change[_ngcontent-%COMP%]   .change-percent[_ngcontent-%COMP%]{margin-left:2px}.day-change[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:0;height:0;margin:7px 4px}.day-change.et-positive[_ngcontent-%COMP%]:before{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid var(--positive-text)}.day-change.et-negative[_ngcontent-%COMP%]:before{width:0;height:0;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid var(--negative-text)}.day-rate[_ngcontent-%COMP%]{line-height:1;font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:1.25rem;letter-spacing:-.35px;color:var(--primary-neutral-text);margin-left:15px}.left-info[_ngcontent-%COMP%]{flex-direction:row;display:flex;align-items:center;overflow:hidden;flex:1}.left-info[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]:hover{cursor:pointer}.left-info[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex-direction:column;display:flex;padding:0 11px;overflow:auto;flex:1}.left-info[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:1rem;letter-spacing:-.3px;letter-spacing:-.2px;text-overflow:ellipsis;white-space:nowrap}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:.875rem;letter-spacing:-.25px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex-direction:column;display:flex;padding:0 11px;overflow:auto}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:1rem;letter-spacing:-.3px;letter-spacing:-.2px;text-overflow:ellipsis;white-space:nowrap}'],changeDetection:0}),a})();const q={[s.Dividend]:"bullsheet.calendar.divPayment",[s.ExDividend]:"bullsheet.calendar.exDiv",[s.Earnings]:"bullsheet.calendar.earnings",[s.Other]:"bullsheet.calendar.other"},bt={[s.Dividend]:"bullsheet.calendar.details.divPayments",[s.ExDividend]:"bullsheet.calendar.details.exDivs",[s.Earnings]:"bullsheet.calendar.details.earnings",[s.Other]:""},kt={[p.BeforeMarket]:"extendedHours.preMarket",[p.AfterMarket]:"extendedHours.afterHours",[p.Unspecified]:"bullsheet.calendar.timeNotSupplied"};let Et=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-quarter-info"]],inputs:{eventData:"eventData"},decls:2,vars:2,consts:[[1,"et-text-align-start","ets-info"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.k0s()),2&t&&(e.R7$(1),e.Lme(" Q",o.eventData.eventQuarter," ",o.eventData.eventYear,"\n"))},styles:[".quarter[_ngcontent-%COMP%]{text-align:start;font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:21px;color:var(--primary-neutral-text)}@media screen and (max-width: 740px){.quarter[_ngcontent-%COMP%]{font-weight:600}}"],changeDetection:0}),a})();function xt(n,a){if(1&n&&e.nrm(0,"i",1),2&n){const r=e.XpG();e.Y8G("ngClass",r.getClass())}}let V=(()=>{var n;class a{constructor(){this.eventTime=p.Unspecified}getClass(){return{"icon-moon-calendar":this.eventTime===p.AfterMarket,"icon-sun-calendar":this.eventTime===p.BeforeMarket}}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-event-time-icon"]],inputs:{eventTime:"eventTime"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(t,o){1&t&&e.DNE(0,xt,1,1,"i",0),2&t&&e.Y8G("ngIf",o.eventTime&&"Unspecified"!==o.eventTime)},dependencies:[d.YU,d.bT],changeDetection:0}),a})();var A=c(91013);function Dt(n,a){if(1&n&&e.nrm(0,"et-event-time-icon",3),2&n){const r=e.XpG();e.Y8G("eventTime",r.eventData.economicCalendarEvent.eventTime)}}function Ot(n,a){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,r.getDisplayName()))}}function Pt(n,a){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,r.getDisplayName()))}}let Tt=(()=>{var n;class a{getDisplayName(){return kt[this.eventData.economicCalendarEvent.eventTime]}isMarketTimeSpecified(){return this.eventData.economicCalendarEvent.eventTime!==p.Unspecified}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-market-time-info"]],inputs:{eventData:"eventData"},decls:4,vars:3,consts:[[1,"market-time-info"],["class","market-time-icon",3,"eventTime",4,"ngIf"],[4,"ngIf"],[1,"market-time-icon",3,"eventTime"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.DNE(1,Dt,1,1,"et-event-time-icon",1),e.DNE(2,Ot,3,3,"span",2),e.DNE(3,Pt,3,3,"span",2),e.k0s()),2&t&&(e.R7$(1),e.Y8G("ngIf",o.isMarketTimeSpecified()),e.R7$(1),e.Y8G("ngIf",o.isMarketTimeSpecified()),e.R7$(1),e.Y8G("ngIf",!o.isMarketTimeSpecified()))},dependencies:[d.bT,V,A.D,h.n],styles:[".market-time-info[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-style:normal;font-weight:400;font-size:14px;line-height:21px;color:var(--primary-neutral-text)}.market-time-info[_ngcontent-%COMP%]   .market-time-icon[_ngcontent-%COMP%]{font-size:12px;line-height:21px;color:var(--secondary-neutral-text);padding-inline-end:6px}"],changeDetection:0}),a})(),It=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-dividend-amount-info"]],inputs:{eventData:"eventData"},decls:4,vars:7,consts:[[1,"ets-plain-text","ets-info"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.nI1(2,"currency"),e.nI1(3,"translateLazy"),e.k0s()),2&t&&(e.R7$(1),e.Lme(" ",e.i5U(2,2,null==o.eventData.economicCalendarEvent?null:o.eventData.economicCalendarEvent.dividendAmount.toFixed(2),o.eventData.economicCalendarEvent.currency)," ",e.bMT(3,5,"bullsheet.calendar.perShare"),"\n"))},dependencies:[d.oe,h.n],encapsulation:2,changeDetection:0}),a})(),wt=(()=>{var n;class a{getUTCTimeString(){return(0,B.A)(this.eventData.economicCalendarEvent.start,"HH:mm")}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-economic-events-time-info"]],inputs:{eventData:"eventData"},decls:2,vars:1,consts:[[1,"ets-plain-text","ets-info"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",o.getUTCTimeString()," UTC\n"))},encapsulation:2,changeDetection:0}),a})(),St=(()=>{var n;class a{getName(){return"bullsheet.calendar."+this.eventData.economicCalendarEvent.title}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-economic-events-name-info"]],inputs:{eventData:"eventData"},decls:3,vars:3,consts:[[1,"ets-plain-text","ets-info"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,o.getName()),"\n"))},dependencies:[h.n],encapsulation:2,changeDetection:0}),a})(),Ft=(()=>{var n;class a{getName(){return this.eventData.economicCalendarEvent.name}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-holiday-info"]],inputs:{eventData:"eventData"},decls:2,vars:1,consts:[[1,"ets-plain-text","ets-info","holiday-info"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",o.getName(),"\n"))},styles:[".holiday-info[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}"],changeDetection:0}),a})();function Rt(n,a){1&n&&(e.j41(0,"div",13),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(1),e.JRh(e.bMT(2,1,"marketEvent.today")))}function $t(n,a){1&n&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n&&(e.R7$(1),e.JRh(e.bMT(2,1,"bullsheet.calendar.tentative")))}function Nt(n,a){if(1&n&&e.nrm(0,"et-quarter-info",15),2&n){const r=e.XpG(2);e.Y8G("eventData",r.eventData)}}function Gt(n,a){if(1&n&&(e.qex(0),e.nrm(1,"span",16)(2,"et-market-time-info",15),e.bVm()),2&n){const r=e.XpG(2);e.R7$(2),e.Y8G("eventData",r.eventData)}}function Yt(n,a){if(1&n&&(e.qex(0),e.nrm(1,"span",16)(2,"et-dividend-amount-info",15),e.bVm()),2&n){const r=e.XpG(2);e.R7$(2),e.Y8G("eventData",r.eventData)}}function Ut(n,a){if(1&n&&e.nrm(0,"et-economic-events-time-info",15),2&n){const r=e.XpG(3);e.Y8G("eventData",r.eventData)}}function jt(n,a){if(1&n&&e.nrm(0,"et-holiday-info",15),2&n){const r=e.XpG(3);e.Y8G("eventData",r.eventData)}}function Bt(n,a){if(1&n&&(e.qex(0),e.nrm(1,"et-economic-events-name-info",15)(2,"span",16),e.DNE(3,Ut,1,1,"et-economic-events-time-info",11),e.DNE(4,jt,1,1,"et-holiday-info",11),e.bVm()),2&n){const r=e.XpG(2);e.R7$(1),e.Y8G("eventData",r.eventData),e.R7$(2),e.Y8G("ngIf",!r.isHolidayEvent()),e.R7$(1),e.Y8G("ngIf",r.isHolidayEvent())}}function Vt(n,a){if(1&n&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,Rt,3,3,"div",3),e.j41(3,"div",4),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"div",5),e.EFF(7),e.nI1(8,"uppercase"),e.nI1(9,"translate"),e.k0s(),e.DNE(10,$t,3,3,"div",6),e.k0s(),e.nrm(11,"div",7),e.j41(12,"div",8)(13,"div",9),e.EFF(14),e.nI1(15,"translateLazy"),e.k0s(),e.j41(16,"div",10),e.DNE(17,Nt,1,1,"et-quarter-info",11),e.DNE(18,Gt,3,1,"ng-container",12),e.DNE(19,Yt,3,1,"ng-container",12),e.DNE(20,Bt,5,3,"ng-container",12),e.k0s()()()),2&n){const r=e.XpG();e.R7$(2),e.Y8G("ngIf",r.isToday),e.R7$(2),e.SpI("",e.i5U(5,10,r.eventData.eventDate,"d")," "),e.R7$(3),e.JRh(e.bMT(8,13,e.bMT(9,15,"monthNames.short"+r.eventMonth))),e.R7$(3),e.Y8G("ngIf",r.isEventTentative()),e.R7$(3),e.Y8G("ngClass",r.getTypeClassName(r.eventData.type)),e.R7$(1),e.SpI(" ",e.bMT(15,17,r.getEventTypeDisplayName(r.eventData.type))," "),e.R7$(3),e.Y8G("ngIf",!r.isOtherEvent()),e.R7$(1),e.Y8G("ngIf",r.isEarningsEvent()),e.R7$(1),e.Y8G("ngIf",r.isDividendEvent()),e.R7$(1),e.Y8G("ngIf",r.isOtherEvent())}}let At=(()=>{var n;class a{ngOnInit(){if(this.isToday=this._isToday(),this.isEarnings=this.eventData.type===s.Earnings,this.eventData.eventDate){const t=new Date(this.eventData.eventDate);this.eventMonth=(t.getMonth()+1).toString()}}_isToday(){const t=new Date;return new Date(this.eventData.eventDate).setHours(0,0,0,0)===t.setHours(0,0,0,0)}getTypeClassName(t){return{dividend:t===s.Dividend,exdividend:t===s.ExDividend,earnings:t===s.Earnings,other:t===s.Other}}generateMessage(){return`${this.eventData.instrument.DisplayName} is set to have ${this.eventData.type===s.Dividend?"a dividend payment":"an ex-dividend payment"}`}getEventTypeDisplayName(t){return q[t]}isEarningsEvent(){return this.eventData.economicCalendarEvent.type===s.Earnings}isDividendEvent(){return this.eventData.economicCalendarEvent.type===s.Dividend||this.eventData.economicCalendarEvent.type===s.ExDividend}isOtherEvent(){return this.eventData.economicCalendarEvent.type===s.Other}isHolidayEvent(){return this.eventData.economicCalendarEvent.type===s.Other&&"holiday"===this.eventData.economicCalendarEvent.title}isEventTentative(){return this.eventData.economicCalendarEvent.isTentative}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-event-info"]],inputs:{eventData:"eventData"},decls:1,vars:1,consts:[["class","et-flex rtl-responsive","automation-id","economic-calendar-event-info-container",4,"ngIf"],["automation-id","economic-calendar-event-info-container",1,"et-flex","rtl-responsive"],["automation-id","economic-calendar-event-info-date-container",1,"date-container"],["class","event-today et-flex-justify-center",4,"ngIf"],["automation-id","economic-calendar-event-info-event-date",1,"event-date"],["automation-id","economic-calendar-event-info-time-text",1,"time-text"],["class","ets-secondary-info",4,"ngIf"],[1,"event-line-separator"],[1,"event-info"],["automation-id","economic-calendar-event-info-event-tag",1,"event-tag","et-tag","et-semi-bold",3,"ngClass"],["automation-id","market-events-text",1,"event-info-chips","et-font-xs","et-text-font"],["class","event-info-chip",3,"eventData",4,"ngIf"],[4,"ngIf"],[1,"event-today","et-flex-justify-center"],[1,"ets-secondary-info"],[1,"event-info-chip",3,"eventData"],[1,"et-dot-separator","separator"]],template:function(t,o){1&t&&e.DNE(0,Vt,21,19,"div",0),2&t&&e.Y8G("ngIf",o.eventData)},dependencies:[d.YU,d.bT,Et,Tt,It,wt,St,Ft,d.Pc,d.vh,A.D,h.n],styles:[".et-color-primary[_ngcontent-%COMP%]{color:var(--brand-hover-action-text)}.et-bg-primary[_ngcontent-%COMP%]{background-color:var(--brand-hover-action-text)}.et-color-primary-lighter-1[_ngcontent-%COMP%]{color:var(--primary-40)}.et-bg-primary-lighter-1[_ngcontent-%COMP%]{background-color:var(--primary-40)}.et-color-primary-lighter-2[_ngcontent-%COMP%]{color:var(--positive-tertiary-bg)}.et-bg-primary-lighter-2[_ngcontent-%COMP%]{background-color:var(--positive-tertiary-bg)}.et-color-primary-lighter-3[_ngcontent-%COMP%]{color:var(--positive-forthiary-bg)}.et-bg-primary-lighter-3[_ngcontent-%COMP%]{background-color:var(--positive-forthiary-bg)}.et-color-primary-variant[_ngcontent-%COMP%]{color:var(--primary-var-70)}.et-bg-primary-variant[_ngcontent-%COMP%]{background-color:var(--primary-var-70)}.et-color-primary-variant-lighter-1[_ngcontent-%COMP%]{color:var(--brand-var-hover-action-text)}.et-bg-primary-variant-lighter-1[_ngcontent-%COMP%]{background-color:var(--brand-var-hover-action-text)}.et-color-primary-variant-lighter-2[_ngcontent-%COMP%]{color:var(--negative-tertiary-bg)}.et-bg-primary-variant-lighter-2[_ngcontent-%COMP%]{background-color:var(--negative-tertiary-bg)}.et-color-primary-variant-lighter-3[_ngcontent-%COMP%]{color:var(--negative-forthiary-bg)}.et-bg-primary-variant-lighter-3[_ngcontent-%COMP%]{background-color:var(--negative-forthiary-bg)}.et-color-secondary[_ngcontent-%COMP%]{color:var(--secondary-100)}.et-bg-secondary[_ngcontent-%COMP%]{background-color:var(--secondary-100)}.et-color-secondary-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-100-hover)}.et-bg-secondary-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-100-hover)}.et-color-secondary-lighter-2[_ngcontent-%COMP%]{color:#c9e5fc}.et-bg-secondary-lighter-2[_ngcontent-%COMP%]{background-color:#c9e5fc}.et-color-secondary-lighter-3[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-secondary-lighter-3[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-background[_ngcontent-%COMP%]{color:var(--info-hover-action-text)}.et-bg-background[_ngcontent-%COMP%]{background-color:var(--info-hover-action-text)}.et-color-background-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-background-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-background-lighter-2[_ngcontent-%COMP%]{color:var(--static-neutral-40)}.et-bg-background-lighter-2[_ngcontent-%COMP%]{background-color:var(--static-neutral-40)}.et-color-background-lighter-3[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-background-lighter-3[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-black[_ngcontent-%COMP%]{color:var(--primary-neutral-text)}.et-bg-black[_ngcontent-%COMP%]{background-color:var(--primary-neutral-text)}.et-color-dark-grey[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-dark-grey[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-grey[_ngcontent-%COMP%]{color:var(--tertiary-neutral-text)}.et-bg-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-neutral-text)}.et-color-lighter-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-lighter-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-hover-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-hover-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-whiter-grey[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-whiter-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-white[_ngcontent-%COMP%]{color:var(--neutral-secondary-bg)}.et-bg-white[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-bg)}.et-color-dark-blue[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-dark-blue[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-new-positive[_ngcontent-%COMP%]{color:var(--positive-text)}.et-bg-new-positive[_ngcontent-%COMP%]{background-color:var(--positive-text)}[_nghost-%COMP%]{overflow:hidden}.event-info-chips[_ngcontent-%COMP%]{display:flex;overflow:hidden;align-items:center;margin-block-start:12px}@media screen and (max-width: 740px){.event-info-chips[_ngcontent-%COMP%]{align-items:start;flex-direction:column;width:100%}}.event-info-chips[_ngcontent-%COMP%]   .event-info-chip[_ngcontent-%COMP%]{text-align:left;width:-moz-fit-content;width:fit-content;white-space:nowrap}@media screen and (max-width: 740px){.event-info-chips[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{display:none}}.event-tag[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:solid 1px var(--neutral-80);border-radius:1rem;color:var(--secondary-neutral-text);padding:.15em .85em;font-size:12px;font-weight:600}.event-tag.earnings[_ngcontent-%COMP%]{border-color:var(--secondary-100);color:var(--secondary-100)}.event-tag.exdividend[_ngcontent-%COMP%]{border-color:#fd8200;color:#fd8200}.event-tag.dividend[_ngcontent-%COMP%]{border-color:var(--brand-action-text);color:var(--brand-action-text)}.event-tag.other[_ngcontent-%COMP%]{border-color:#b89dfb;color:#b89dfb}.event-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding-block:24px;padding-inline:18px}.event-line-separator[_ngcontent-%COMP%]{width:1px;background-color:var(--secondary-divider);flex-shrink:0}.time-text[_ngcontent-%COMP%]{font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:.625rem;letter-spacing:-.15px;font-weight:700;text-align:center;color:var(--secondary-neutral-text)}.date-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;align-self:center;flex-shrink:0;padding-block:12px;padding-inline:30px}.event-date[_ngcontent-%COMP%]{font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:3.125rem;letter-spacing:-1.25px;font-size:40px;color:var(--info-hover-action-text);font-weight:700;letter-spacing:0;line-height:1;text-align:center;padding:2px 0 1px}.event-today[_ngcontent-%COMP%]{font-weight:600;letter-spacing:-.15px;color:#aa0f0f;font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:.875rem;letter-spacing:-.25px;line-height:20px}@media (max-width: 767px){.event-info[_ngcontent-%COMP%]{padding-block:24px;padding-inline:15px}.event-info[_ngcontent-%COMP%]   .event-msg[_ngcontent-%COMP%]{-webkit-line-clamp:2}.date-container[_ngcontent-%COMP%]{width:6.25rem;height:6.25rem;padding:15px 0}}"],changeDetection:0}),a})();function Lt(n,a){if(1&n&&e.nrm(0,"et-portfolio-avatar",2),2&n){const r=e.XpG();e.Y8G("tradeItem",null==r.event?null:r.event.instrument)}}function Xt(n,a){if(1&n&&(e.j41(0,"div",3),e.nrm(1,"img",4),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.Y8G("src",r.getOtherEventLogo(),e.B4B)}}let ee=(()=>{var n;class a{constructor(){this._imageBaseUrl="https://estonks-bucket.s3.eu-central-1.amazonaws.com/"}isOtherEvent(){return this.event.type===s.Other}getOtherEventLogo(){return`${this._imageBaseUrl}${this.event.country}.svg`}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-trading-calendar-event-card-logo"]],inputs:{event:"event"},decls:2,vars:2,consts:[["class","event-card-logo","automation-id","economic-calendar-desktop-event-avatar",3,"tradeItem",4,"ngIf"],["class","event-card-logo-wrapper",4,"ngIf"],["automation-id","economic-calendar-desktop-event-avatar",1,"event-card-logo",3,"tradeItem"],[1,"event-card-logo-wrapper"],["automation-id","trade-item-avatar",1,"event-card-logo",3,"src"]],template:function(t,o){1&t&&(e.DNE(0,Lt,1,1,"et-portfolio-avatar",0),e.DNE(1,Xt,2,1,"div",1)),2&t&&(e.Y8G("ngIf",!o.isOtherEvent()),e.R7$(1),e.Y8G("ngIf",o.isOtherEvent()))},dependencies:[d.bT,Me.R],styles:['[_nghost-%COMP%]{position:relative}[_nghost-%COMP%]:before{display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:rgba(var(--rgb-neutral-100),.4);position:absolute;font-size:18px;color:var(--neutral-secondary-bg);font-weight:bolder;z-index:1;border-radius:3px}.event-card-logo-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;border-radius:4px}.event-card-logo-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;width:100%;height:100%;left:0;top:0;mix-blend-mode:overlay;background-image:linear-gradient(to bottom,rgba(var(--rgb-neutral-0),.75),rgba(var(--rgb-neutral-0),0));z-index:1}.event-card-logo-wrapper[_ngcontent-%COMP%]   .event-card-logo[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;border-radius:4px}'],changeDetection:0}),a})(),zt=(()=>{var n;class a{constructor(t){this.location=t}navigate(t){this.location.go(t)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(d.aZ))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-market-event-info"]],inputs:{eventData:"eventData"},decls:11,vars:7,consts:[[1,"info-container"],[1,"left-info"],[3,"click"],["automation-id","market-events-market-avatar",1,"et-avatar","et-avatar-m",3,"event"],[1,"avatar-info"],["automation-id","market-events-market-symbol",1,"symbol"],["automation-id","market-events-market-name",1,"name"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.bIt("click",function(){return o.navigate(null==o.eventData||null==o.eventData.instrument?null:o.eventData.instrument.Url)}),e.nrm(3,"et-trading-calendar-event-card-logo",3),e.k0s(),e.j41(4,"div",4)(5,"div",5),e.EFF(6),e.nI1(7,"translateLazy"),e.k0s(),e.j41(8,"div",6),e.EFF(9),e.nI1(10,"translateLazy"),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("event",o.eventData.economicCalendarEvent),e.R7$(3),e.SpI("",e.bMT(7,3,"bullsheet.calendar."+o.eventData.economicCalendarEvent.title)," "),e.R7$(3),e.SpI(" ",e.bMT(10,5,"bullsheet.calendar.economicEvent")," "))},dependencies:[ee,h.n],styles:[".et-color-primary[_ngcontent-%COMP%]{color:var(--brand-hover-action-text)}.et-bg-primary[_ngcontent-%COMP%]{background-color:var(--brand-hover-action-text)}.et-color-primary-lighter-1[_ngcontent-%COMP%]{color:var(--primary-40)}.et-bg-primary-lighter-1[_ngcontent-%COMP%]{background-color:var(--primary-40)}.et-color-primary-lighter-2[_ngcontent-%COMP%]{color:var(--positive-tertiary-bg)}.et-bg-primary-lighter-2[_ngcontent-%COMP%]{background-color:var(--positive-tertiary-bg)}.et-color-primary-lighter-3[_ngcontent-%COMP%]{color:var(--positive-forthiary-bg)}.et-bg-primary-lighter-3[_ngcontent-%COMP%]{background-color:var(--positive-forthiary-bg)}.et-color-primary-variant[_ngcontent-%COMP%]{color:var(--primary-var-70)}.et-bg-primary-variant[_ngcontent-%COMP%]{background-color:var(--primary-var-70)}.et-color-primary-variant-lighter-1[_ngcontent-%COMP%]{color:var(--brand-var-hover-action-text)}.et-bg-primary-variant-lighter-1[_ngcontent-%COMP%]{background-color:var(--brand-var-hover-action-text)}.et-color-primary-variant-lighter-2[_ngcontent-%COMP%]{color:var(--negative-tertiary-bg)}.et-bg-primary-variant-lighter-2[_ngcontent-%COMP%]{background-color:var(--negative-tertiary-bg)}.et-color-primary-variant-lighter-3[_ngcontent-%COMP%]{color:var(--negative-forthiary-bg)}.et-bg-primary-variant-lighter-3[_ngcontent-%COMP%]{background-color:var(--negative-forthiary-bg)}.et-color-secondary[_ngcontent-%COMP%]{color:var(--secondary-100)}.et-bg-secondary[_ngcontent-%COMP%]{background-color:var(--secondary-100)}.et-color-secondary-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-100-hover)}.et-bg-secondary-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-100-hover)}.et-color-secondary-lighter-2[_ngcontent-%COMP%]{color:#c9e5fc}.et-bg-secondary-lighter-2[_ngcontent-%COMP%]{background-color:#c9e5fc}.et-color-secondary-lighter-3[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-secondary-lighter-3[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-background[_ngcontent-%COMP%]{color:var(--info-hover-action-text)}.et-bg-background[_ngcontent-%COMP%]{background-color:var(--info-hover-action-text)}.et-color-background-lighter-1[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-background-lighter-1[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-background-lighter-2[_ngcontent-%COMP%]{color:var(--static-neutral-40)}.et-bg-background-lighter-2[_ngcontent-%COMP%]{background-color:var(--static-neutral-40)}.et-color-background-lighter-3[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-background-lighter-3[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-black[_ngcontent-%COMP%]{color:var(--primary-neutral-text)}.et-bg-black[_ngcontent-%COMP%]{background-color:var(--primary-neutral-text)}.et-color-dark-grey[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.et-bg-dark-grey[_ngcontent-%COMP%]{background-color:var(--secondary-neutral-text)}.et-color-grey[_ngcontent-%COMP%]{color:var(--tertiary-neutral-text)}.et-bg-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-neutral-text)}.et-color-lighter-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-lighter-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-hover-grey[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-hover-grey[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-whiter-grey[_ngcontent-%COMP%]{color:var(--tertiary-divider)}.et-bg-whiter-grey[_ngcontent-%COMP%]{background-color:var(--tertiary-divider)}.et-color-white[_ngcontent-%COMP%]{color:var(--neutral-secondary-bg)}.et-bg-white[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-bg)}.et-color-dark-blue[_ngcontent-%COMP%]{color:var(--secondary-divider)}.et-bg-dark-blue[_ngcontent-%COMP%]{background-color:var(--secondary-divider)}.et-color-new-positive[_ngcontent-%COMP%]{color:var(--positive-text)}.et-bg-new-positive[_ngcontent-%COMP%]{background-color:var(--positive-text)}[_nghost-%COMP%]{display:block;flex:1;overflow:hidden}.info-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-inline:30px;padding-block:25px;overflow:hidden}.left-info[_ngcontent-%COMP%]{flex-direction:row;display:flex;align-items:center;overflow:hidden;flex:1}.left-info[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex-direction:column;display:flex;padding:0 11px;overflow:auto;flex:1}.left-info[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:1rem;letter-spacing:-.3px;letter-spacing:-.2px;text-overflow:ellipsis;white-space:nowrap}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:.875rem;letter-spacing:-.25px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex-direction:column;display:flex;padding:0 11px;overflow:auto}.left-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:general-font,Open Sans,Arial,sans-serif;font-style:normal;font-size:1rem;letter-spacing:-.3px;letter-spacing:-.2px;text-overflow:ellipsis;white-space:nowrap}"],changeDetection:0}),a})();function Ht(n,a){if(1&n&&e.nrm(0,"et-instrument-event-info",8),2&n){const r=e.XpG();e.Y8G("eventData",r.eventData)}}function Wt(n,a){if(1&n&&e.nrm(0,"et-market-event-info",2),2&n){const r=e.XpG();e.Y8G("eventData",r.eventData)}}let Ee=(()=>{var n;class a{constructor(t){this.mixpanelService=t}trade(){this.mixpanelService.onTradeClicked(this.eventData),this.eventData.instrument.buy(!0,"calendar")}getTradeButtonDisplayName(){return"bullsheet.calendar.trade"}isOtherEvent(){return this.eventData.economicCalendarEvent.type===s.Other}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU($))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-event-item"]],inputs:{eventData:"eventData"},decls:10,vars:6,consts:[[1,"event-item-container"],[1,"et-flex-row"],[3,"eventData"],[1,"et-horizontal-divider"],["etInstrumentRateObserver","",3,"eventData",4,"ngIf"],[3,"eventData",4,"ngIf"],[1,"card-bottom","et-width-100","et-flex-justify-center"],["automation-id","economic-calendar-event-info-trade-button",1,"ets-button-basic","ets-button-primary","et-width-100",3,"click"],["etInstrumentRateObserver","",3,"eventData"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"et-event-info",2),e.k0s(),e.nrm(3,"div",3),e.DNE(4,Ht,1,1,"et-instrument-event-info",4),e.DNE(5,Wt,1,1,"et-market-event-info",5),e.j41(6,"div",6)(7,"button",7),e.bIt("click",function(){return o.trade()}),e.EFF(8),e.nI1(9,"translateLazy"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("eventData",o.eventData),e.R7$(2),e.Y8G("ngIf",!o.isOtherEvent()),e.R7$(1),e.Y8G("ngIf",o.isOtherEvent()),e.R7$(3),e.JRh(e.bMT(9,4,o.getTradeButtonDisplayName())))},dependencies:[d.bT,ht.A,yt,At,zt,h.n],styles:[".event-item-container[_ngcontent-%COMP%]{padding-block-end:30px;border-radius:10px;background-color:var(--neutral-secondary-bg);display:block}.event-item-container[_ngcontent-%COMP%]   .card-bottom[_ngcontent-%COMP%]{padding-inline:30px}.on-feed-post[_nghost-%COMP%]   .event-item-container[_ngcontent-%COMP%], .on-feed-post   [_nghost-%COMP%]   .event-item-container[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:rgba(var(--rgb-neutral-0),.9)}.rtl-direction[_nghost-%COMP%], .rtl-direction   [_nghost-%COMP%]{direction:rtl}"],changeDetection:0}),a})();const Qt=function(){return{"custom-market-event-popup-calendar":!0}};function Jt(n,a){if(1&n){const r=e.RV6();e.j41(0,"div",3),e.bIt("mouseenter",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onMouseEnterEvent())})("mouseleave",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onMouseLeaveEvent())}),e.j41(1,"div",4),e.nrm(2,"div",5)(3,"et-trading-calendar-event-card-logo",6),e.j41(4,"div",7),e.EFF(5),e.nI1(6,"translateLazy"),e.k0s()(),e.nrm(7,"et-event-time-icon",8),e.k0s()}if(2&n){const r=e.XpG(),t=e.sdS(3);e.Y8G("etTooltip",t)("etTooltipEnableHover",!0)("etTooltipShowDelay",400)("tooltipClass",e.lJ4(12,Qt))("ngClass",r.getClassName(r.event)),e.BMQ("automation-id","economic-calendar-desktop-event-"+r.event.type+r.getAssetTypeToAutomationId()),e.R7$(2),e.Y8G("ngClass",r.getClassName(r.event)),e.R7$(1),e.Y8G("event",r.event),e.R7$(2),e.JRh(r.isOtherEvent()?e.bMT(6,10,"bullsheet.calendar."+r.event.title):r.event.title),e.R7$(2),e.Y8G("eventTime",null==r.event?null:r.event.eventTime)}}function Kt(n,a){if(1&n&&e.nrm(0,"et-trading-calendar-event-card-logo",13),2&n){const t=a.index;e.Y8G("event",a.$implicit),e.BMQ("class","event-card-logo stacked-"+t)}}function Zt(n,a){if(1&n&&(e.j41(0,"div",9)(1,"div",10),e.DNE(2,Kt,1,2,"et-trading-calendar-event-card-logo",11),e.k0s(),e.j41(3,"div",12),e.EFF(4),e.k0s()()),2&n){const r=e.XpG();e.R7$(2),e.Y8G("ngForOf",r.showMore.slice(0,3)),e.R7$(2),e.SpI("+",r.showMore.length,"")}}function qt(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-event-item",14),e.bIt("mouseenter",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onMouseEnterTooltip())})("mouseleave",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onMouseLeaveTooltip())}),e.k0s()}if(2&n){const r=e.XpG();e.Y8G("eventData",r.getEventData(r.event))}}let en=(()=>{var n;class a{constructor(){this.isMouseOnTooltip=!1,this.isMouseOnEvent=!1}getClassName(t){return{earnings:t.type===s.Earnings,dividend:t.type===s.Dividend,exdividend:t.type===s.ExDividend,other:t.type===s.Other}}getEventData(t){return _e(t)}disablePopup(){this.tooltipDirectiveRef.hide()}onMouseLeaveTooltip(){this.isMouseOnTooltip=!1,this.isShowPopup()}onMouseLeaveEvent(){this.isMouseOnEvent=!1,this.isShowPopup()}onMouseEnterEvent(){this.isMouseOnEvent=!0}onMouseEnterTooltip(){this.isMouseOnTooltip=!0}isShowPopup(){setTimeout(()=>{!this.isMouseOnEvent&&!this.isMouseOnTooltip&&this.disablePopup()},500)}isOtherEvent(){return this.event.type===s.Other}getAssetTypeToAutomationId(){return this.isOtherEvent()?"":`-${this.event.assetType}`}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-trading-calendar-event-card"]],viewQuery:function(t,o){if(1&t&&e.GBs(K.dg,5),2&t){let i;e.mGM(i=e.lsd())&&(o.tooltipDirectiveRef=i.first)}},inputs:{event:"event",showMore:"showMore"},decls:4,vars:2,consts:[["class","event et-flex-between",3,"etTooltip","etTooltipEnableHover","etTooltipShowDelay","tooltipClass","ngClass","mouseenter","mouseleave",4,"ngIf"],["class","event show-more",4,"ngIf"],["marketEventItemTemplate",""],[1,"event","et-flex-between",3,"etTooltip","etTooltipEnableHover","etTooltipShowDelay","tooltipClass","ngClass","mouseenter","mouseleave"],[1,"et-flex"],[1,"small-bar",3,"ngClass"],["automation-id","economic-calendar-desktop-event-avatar",1,"event-card-logo",3,"event"],[1,"ets-info","ets-bold","et-text-align-start","stock-name"],["automation-id","economic-calendar-desktop-before-or-after-market",1,"before-or-after-market",3,"eventTime"],[1,"event","show-more"],[1,"stacked-logos","et-flex-align-center","et-flex-between"],["automation-id","economic-calendar-desktop-event-avatar",3,"event",4,"ngFor","ngForOf"],[1,"hidden-counter"],["automation-id","economic-calendar-desktop-event-avatar",3,"event"],["automation-id","economic-calendar-desktop-event-tooltip",3,"eventData","mouseenter","mouseleave"]],template:function(t,o){1&t&&(e.DNE(0,Jt,8,13,"div",0),e.DNE(1,Zt,5,2,"div",1),e.DNE(2,qt,1,1,"ng-template",null,2,e.C5r)),2&t&&(e.Y8G("ngIf",!((null==o.showMore?null:o.showMore.length)>0)),e.R7$(1),e.Y8G("ngIf",(null==o.showMore?null:o.showMore.length)>0))},dependencies:[d.YU,d.Sq,d.bT,K.dg,Ee,V,ee,h.n],styles:[".et-tooltip.custom-market-event-popup-calendar{padding:0;border-radius:5px;width:390px}.event[_ngcontent-%COMP%]{border-radius:4px;padding-block:8px;margin-block-end:8px}.event[_ngcontent-%COMP%]   .before-or-after-market[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-inline-end:12px;margin-block:auto}.event.earnings[_ngcontent-%COMP%]{background-color:#2999f514}.event.dividend[_ngcontent-%COMP%]{background-color:#32527d14}.event.exdividend[_ngcontent-%COMP%]{background-color:#fd820014}.event.other[_ngcontent-%COMP%]{background-color:#b89dfb14}.event.show-more[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;padding-inline-start:8px;padding-inline-end:14px;background-color:#555b701a;color:var(--primary-neutral-text)}.event[_ngcontent-%COMP%]   .small-bar[_ngcontent-%COMP%]{width:3px;border-radius:5px;margin-inline:6px;align-self:center;height:25px}.event[_ngcontent-%COMP%]   .small-bar.earnings[_ngcontent-%COMP%]{background:var(--secondary-100)}.event[_ngcontent-%COMP%]   .small-bar.dividend[_ngcontent-%COMP%]{background:var(--brand-action-text)}.event[_ngcontent-%COMP%]   .small-bar.exdividend[_ngcontent-%COMP%]{background:#fd8200}.event[_ngcontent-%COMP%]   .small-bar.other[_ngcontent-%COMP%]{background:#B89DFB}.event[_ngcontent-%COMP%]   .stacked-logos[_ngcontent-%COMP%]{flex-wrap:wrap}.event[_ngcontent-%COMP%]   .event-card-logo[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:4px}.event[_ngcontent-%COMP%]   .event-card-logo.stacked[_ngcontent-%COMP%]{overflow:hidden;position:relative}.event[_ngcontent-%COMP%]   .event-card-logo.stacked-0[_ngcontent-%COMP%]{overflow:hidden;position:relative;margin-right:-10px;z-index:0;box-shadow:none}.event[_ngcontent-%COMP%]   .event-card-logo.stacked-1[_ngcontent-%COMP%]{overflow:hidden;position:relative;z-index:1;box-shadow:-4px 0 4px rgba(var(--primary-neutral-text),.1)}.event[_ngcontent-%COMP%]   .event-card-logo.stacked-2[_ngcontent-%COMP%]{overflow:hidden;position:relative;margin-left:-10px;z-index:2;box-shadow:-4px 0 4px rgba(var(--primary-neutral-text),.1)}.event[_ngcontent-%COMP%]   .stock-name[_ngcontent-%COMP%]{margin-inline-start:6px;line-height:21px;overflow:hidden;white-space:nowrap;max-width:194px;text-overflow:ellipsis}"]}),a})();function tn(n,a){1&n&&e.nrm(0,"et-trading-calendar-event-card",2),2&n&&e.Y8G("event",a.$implicit)}function nn(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-trading-calendar-event-card",3),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onShowMoreClicked(o.showMore.length))}),e.k0s()}if(2&n){const r=e.XpG();e.Y8G("showMore",r.showMore)}}let on=(()=>{var n;class a{set events(t){this._events=t,this.invalidateExpansion()}set expandedWeeks(t){this._expandedWeeks=t,this.invalidateExpansion()}constructor(t,o){this.showMoreService=t,this.mixpanelService=o}ngOnInit(){this._weekId=this.showMoreService.getWeekId(this.day)}onShowMoreClicked(t){this.showMoreService.expandWeek(this._weekId),this.mixpanelService.onShowMoreClicked(t)}checkIfExpanded(){return(0,vt.A)(this._expandedWeeks,this._weekId)}shouldShowOneMore(){return this._events.length===this.showMoreService.maxNumberOfEventsToShow}invalidateExpansion(){if(this.checkIfExpanded())this.eventsToShow=this._events,this.showMore=[];else{const t=this.shouldShowOneMore();this.eventsToShow=this._events.slice(0,this.showMoreService.maxNumberOfEventsToShow-(t?0:1)),this.showMore=t?[]:this._events.slice(this.showMoreService.maxNumberOfEventsToShow-1)}}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(j),e.rXU($))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-trading-calendar-events"]],inputs:{events:"events",expandedWeeks:"expandedWeeks",day:"day"},decls:3,vars:3,consts:[[3,"event",4,"ngFor","ngForOf"],["class","show-more-calendar-event",3,"showMore","click",4,"ngIf"],[3,"event"],[1,"show-more-calendar-event",3,"showMore","click"]],template:function(t,o){1&t&&(e.j41(0,"div"),e.DNE(1,tn,1,1,"et-trading-calendar-event-card",0),e.DNE(2,nn,1,1,"et-trading-calendar-event-card",1),e.k0s()),2&t&&(e.Y8G("@expandAnimation",o.showMore.length>0?"minimized":"expanded"),e.R7$(1),e.Y8G("ngForOf",o.eventsToShow),e.R7$(1),e.Y8G("ngIf",o.showMore.length>0))},dependencies:[d.Sq,d.bT,en],styles:[".show-more-calendar-event[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[(0,O.hZ)("expandAnimation",[(0,O.wk)("expanded",(0,O.iF)({height:"*"})),(0,O.wk)("minimized",(0,O.iF)({height:"245px"})),(0,O.kY)("minimized => expanded",(0,O.i0)("300ms ease-out"))])]},changeDetection:0}),a})();var xe=c(77280);let rn=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar-logo"]],inputs:{event:"event"},decls:1,vars:1,consts:[["automation-id","economic-calendar-mobile-event-avatar",1,"et-flex-center","list-view-clanedar-logo",3,"event"]],template:function(t,o){1&t&&e.nrm(0,"et-trading-calendar-event-card-logo",0),2&t&&e.Y8G("event",o.event)},dependencies:[ee],styles:[".list-view-clanedar-logo[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:4px;margin-inline-end:10px}"],changeDetection:0}),a})(),an=(()=>{var n;class a{getFullName(){return this.event.instrument.DisplayName}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar-event-data-instrument"]],inputs:{event:"event"},decls:5,vars:3,consts:[[1,"symbol"],[1,"before-or-after-market",3,"eventTime"],[1,"fullname"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.nrm(2,"et-event-time-icon",1),e.k0s(),e.j41(3,"div",2),e.EFF(4),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",o.event.title," "),e.R7$(1),e.Y8G("eventTime",null==o.event?null:o.event.eventTime),e.R7$(2),e.JRh(o.getFullName()))},dependencies:[V],styles:[".before-or-after-market[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-inline-start:2px;width:12px;height:12px}.symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:20px;letter-spacing:-.2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fullname[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:12px;line-height:16px;letter-spacing:-.25px;font-weight:400;overflow:hidden;text-overflow:ellipsis;overflow-x:auto}"],changeDetection:0}),a})(),sn=(()=>{var n;class a{getFullName(){return"bullsheet.calendar.economicEvent"}getDisplayName(){return"bullsheet.calendar."+this.event.title}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar-event-data-market"]],inputs:{event:"event"},decls:7,vars:7,consts:[[1,"symbol"],[1,"before-or-after-market",3,"eventTime"],[1,"fullname"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.EFF(1),e.nI1(2,"translateLazy"),e.nrm(3,"et-event-time-icon",1),e.k0s(),e.j41(4,"div",2),e.EFF(5),e.nI1(6,"translateLazy"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,3,o.getDisplayName())," "),e.R7$(2),e.Y8G("eventTime",null==o.event?null:o.event.eventTime),e.R7$(2),e.JRh(e.bMT(6,5,o.getFullName())))},dependencies:[V,h.n],styles:[".before-or-after-market[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-inline-start:2px;width:12px;height:12px}.symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:20px;letter-spacing:-.2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fullname[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:12px;line-height:16px;letter-spacing:-.25px;font-weight:400;overflow:hidden;text-overflow:ellipsis;overflow-x:auto}"],changeDetection:0}),a})();function ln(n,a){if(1&n&&e.nrm(0,"et-list-view-calendar-event-data-market",1),2&n){const r=e.XpG();e.Y8G("event",r.event)}}function cn(n,a){if(1&n&&e.nrm(0,"et-list-view-calendar-event-data-instrument",1),2&n){const r=e.XpG();e.Y8G("event",r.event)}}let dn=(()=>{var n;class a{getFullName(){return this.isInstrumentEvent?this.event.instrument.DisplayName:"bullsheet.calendar.economicEvent"}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar-event-data"]],inputs:{event:"event",isInstrumentEvent:"isInstrumentEvent"},decls:5,vars:3,consts:[[1,"et-flex-row","et-flex-between","et-flex-align-center"],[3,"event"],[1,"et-flex-column"],[3,"event",4,"ngIf"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.nrm(1,"et-list-view-calendar-logo",1),e.j41(2,"div",2),e.DNE(3,ln,1,1,"et-list-view-calendar-event-data-market",3),e.DNE(4,cn,1,1,"et-list-view-calendar-event-data-instrument",3),e.k0s()()),2&t&&(e.R7$(1),e.Y8G("event",o.event),e.R7$(2),e.Y8G("ngIf",!o.isInstrumentEvent),e.R7$(1),e.Y8G("ngIf",o.isInstrumentEvent))},dependencies:[d.bT,rn,an,sn],styles:[".before-or-after-market[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-inline-start:2px;width:12px;height:12px}.symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:20px;letter-spacing:-.2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fullname[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:12px;line-height:16px;letter-spacing:-.25px;font-weight:400;overflow:hidden;text-overflow:ellipsis;overflow-x:auto}"],changeDetection:0}),a})(),vn=(()=>{var n;class a{getTypeClassName(t){return{dividend:t===s.Dividend,exdividend:t===s.ExDividend,earnings:t===s.Earnings,other:t===s.Other}}getEventTypeDisplayName(t){return q[t]}getFullName(){return this.isOtherEvent()?"bullsheet.calendar.economicEvent":this.event.instrument.DisplayName}isOtherEvent(){return this.event.type===s.Other}getAssetTypeToAutomationId(){return this.isOtherEvent()?"":`-${this.event.assetType}`}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar-event"]],inputs:{event:"event"},decls:5,vars:7,consts:[[1,"et-flex-row","et-flex-between","et-flex-align-center","list-view-calendar-event"],[1,"et-flex-row","et-flex-between","et-flex-align-center",3,"isInstrumentEvent","event"],[1,"et-flex-center","et-text-align-center","ets-secondary-info","ets-semi-bold","type",3,"ngClass"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.nrm(1,"et-list-view-calendar-event-data",1),e.j41(2,"div",2),e.EFF(3),e.nI1(4,"translateLazy"),e.k0s()()),2&t&&(e.BMQ("automation-id","economic-calendar-mobile-event-"+o.event.type+o.getAssetTypeToAutomationId()),e.R7$(1),e.Y8G("isInstrumentEvent",!o.isOtherEvent())("event",o.event),e.R7$(1),e.Y8G("ngClass",o.getTypeClassName(o.event.type)),e.R7$(1),e.SpI("",e.bMT(4,5,o.getEventTypeDisplayName(o.event.type))," "))},dependencies:[d.YU,dn,h.n],styles:[".list-view-calendar-event[_ngcontent-%COMP%]{margin:10px 0}.list-view-calendar-event[_ngcontent-%COMP%]   .before-or-after-market[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-inline-start:2px;width:12px;height:12px}.list-view-calendar-event[_ngcontent-%COMP%]   .symbol[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:14px;line-height:20px;letter-spacing:-.2px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.list-view-calendar-event[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);font-family:Open Sans,sans-serif;font-style:normal;font-size:12px;line-height:16px;letter-spacing:-.25px;font-weight:400;overflow:hidden;text-overflow:ellipsis;overflow-x:auto}.list-view-calendar-event[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;border:1px solid transparent;padding:0 .85em;letter-spacing:-.2px;height:20px;background:transparent;border-radius:20px;white-space:nowrap}.list-view-calendar-event[_ngcontent-%COMP%]   .type.earnings[_ngcontent-%COMP%]{border-color:var(--secondary-100);color:var(--secondary-100)}.list-view-calendar-event[_ngcontent-%COMP%]   .type.exdividend[_ngcontent-%COMP%]{border-color:#fd8200;color:#fd8200}.list-view-calendar-event[_ngcontent-%COMP%]   .type.dividend[_ngcontent-%COMP%]{border-color:var(--brand-action-text);color:var(--brand-action-text)}.list-view-calendar-event[_ngcontent-%COMP%]   .type.other[_ngcontent-%COMP%]{border-color:#b89dfb;color:#b89dfb}"],changeDetection:0}),a})();const mn=["tradeDialog"];function gn(n,a){1&n&&(e.j41(0,"div",4),e.nrm(1,"img",5),e.j41(2,"h6",6),e.EFF(3),e.nI1(4,"translateLazy"),e.k0s()()),2&n&&(e.R7$(3),e.JRh(e.bMT(4,1,"bullsheet.calendar.noEvents")))}function pn(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-list-view-calendar-event",13),e.bIt("click",function(){const i=e.eBV(r).$implicit,l=e.XpG(4);return e.Njj(l.openPopup(i))}),e.k0s()}2&n&&e.Y8G("event",a.$implicit)}function un(n,a){1&n&&e.nrm(0,"div",14)}function hn(n,a){if(1&n&&(e.j41(0,"li",9)(1,"div",10),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.DNE(4,pn,1,1,"et-list-view-calendar-event",11),e.DNE(5,un,1,0,"div",12),e.k0s()),2&n){const r=a.$implicit,t=a.index,o=e.XpG(3);e.Y8G("ngClass",o.getTodayClassName(r)),e.R7$(2),e.JRh(e.i5U(3,4,r.date,"EEE, MMMM d, y")),e.R7$(2),e.Y8G("ngForOf",r.events),e.R7$(1),e.Y8G("ngIf",t!==o.days.length-1)}}function fn(n,a){if(1&n&&(e.j41(0,"ul",7),e.DNE(1,hn,6,7,"li",8),e.k0s()),2&n){const r=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",r.days)("ngForTrackBy",r.trackByDate)}}function Cn(n,a){if(1&n&&(e.qex(0),e.DNE(1,gn,5,3,"div",2),e.DNE(2,fn,2,2,"ul",3),e.bVm()),2&n){const r=e.XpG();e.R7$(1),e.Y8G("ngIf",0===r.days.length),e.R7$(1),e.Y8G("ngIf",r.days.length>0)}}function _n(n,a){if(1&n&&(e.j41(0,"div",15),e.nrm(1,"et-event-item",16),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.Y8G("eventData",r.getEventData(r.clickedEvent))}}let yn=(()=>{var n;class a extends D.jD{constructor(t,o,i,l,v,m,M){super(t,o,i,l),this.cdr=t,this.utils=o,this.dateAdapter=l,this.dialogService=v,this.loaderService=m,this.mixpanelService=M,this.clickedEvent=null}get days(){return this.filterEmpty(this.filterNotInMonth(this.view.days))}get isLoading$(){return this.loaderService.isLoading$}filterEmpty(t){return t.filter(o=>{var i;return!(null==o||null===(i=o.events)||void 0===i||!i.length)})}filterNotInMonth(t){return t.filter(o=>o.inMonth)}openPopup(t){this.clickedEvent=t,this.dialogService.open(this.tradeDialog,{disableClose:!1,height:"fit-content"}),this.mixpanelService.onEconomicEventClicked(this.getEventData(t))}getEventData(t){return _e(t)}getTodayClassName(t){return{today:t.isToday,past:t.isPast}}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(e.gRc),e.rXU(D.AD),e.rXU(e.xe9),e.rXU(D.MJ),e.rXU(ue.o3),e.rXU(he.Z),e.rXU($))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-list-view-calendar"]],viewQuery:function(t,o){if(1&t&&e.GBs(mn,5),2&t){let i;e.mGM(i=e.lsd())&&(o.tradeDialog=i.first)}},features:[e.Vt3],decls:4,vars:3,consts:[[4,"ngIf"],["tradeDialog",""],["class","no-events et-flex-center et-flex-column et-height-100",4,"ngIf"],["class","et-flex-column et-height-100",4,"ngIf"],[1,"no-events","et-flex-center","et-flex-column","et-height-100"],["src","https://etoro-cdn.etorostatic.com/web-client/img/no-events-to-show.png","etDarkSrc","https://etoro-cdn.etorostatic.com/web-client/img/no-events-to-show-dark.png",1,"no-events-image"],[1,"no-events-text","ets-title-secondary"],[1,"et-flex-column","et-height-100"],["class","day et-flex-column",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"day","et-flex-column",3,"ngClass"],[1,"header","ets-info","ets-semi-bold"],[3,"event","click",4,"ngFor","ngForOf"],["class","et-horizontal-divider divider",4,"ngIf"],[3,"event","click"],[1,"et-horizontal-divider","divider"],[1,"popup"],[3,"eventData"]],template:function(t,o){1&t&&(e.DNE(0,Cn,3,2,"ng-container",0),e.nI1(1,"async"),e.DNE(2,_n,2,1,"ng-template",null,1,e.C5r)),2&t&&e.Y8G("ngIf",!e.bMT(1,1,o.isLoading$))},dependencies:[d.YU,d.Sq,d.bT,xe.il,Ee,vn,d.Jj,d.vh,h.n],styles:[".popup[_ngcontent-%COMP%]{opacity:1;background-color:var(--neutral-secondary-bg);width:88vw;visibility:visible;z-index:1001;box-shadow:0 1px 8px 2px rgba(var(--rgb-neutral-100),.1);border-radius:6px;height:-moz-fit-content;height:fit-content}.no-events[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:3rem}.no-events[_ngcontent-%COMP%]   .no-events-image[_ngcontent-%COMP%]{width:140px}.no-events[_ngcontent-%COMP%]   .no-events-text[_ngcontent-%COMP%]{color:var(--secondary-neutral-text)}.day[_ngcontent-%COMP%]{list-style:none}.day[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--secondary-neutral-text);margin-block-end:8px}.day[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin-block-start:14px;margin-block-end:18px}"],changeDetection:0}),a})();function Mn(n,a){if(1&n&&e.nrm(0,"mwl-calendar-month-view",4),2&n){const r=e.XpG(),t=e.sdS(3),o=e.sdS(5);e.Y8G("viewDate",r.viewDate)("events",r.events)("cellTemplate",t)("weekStartsOn",r.weekStartsOn)("headerTemplate",o)}}function bn(n,a){if(1&n&&e.nrm(0,"et-list-view-calendar",5),2&n){const r=e.XpG();e.Y8G("viewDate",r.viewDate)("events",r.events)("weekStartsOn",r.weekStartsOn)}}function kn(n,a){if(1&n&&(e.qex(0),e.nrm(1,"et-trading-calendar-events",9),e.bVm()),2&n){const r=a.ngIf,t=e.XpG().day;e.R7$(1),e.Y8G("events",t.events)("day",t)("expandedWeeks",r.expandedWeeks)}}const En=function(n){return{expandedWeeks:n}};function xn(n,a){if(1&n&&(e.j41(0,"div",6)(1,"span",7),e.EFF(2),e.nI1(3,"calendarDate"),e.k0s(),e.DNE(4,kn,2,3,"ng-container",8),e.nI1(5,"async"),e.k0s()),2&n){const r=a.day,t=a.locale,o=e.XpG();e.Y8G("ngClass",o.getClassName(r)),e.R7$(1),e.Y8G("ngClass",o.getClassName(r)),e.R7$(1),e.JRh(e.brH(3,4,r.date,"monthViewDayNumber",t)),e.R7$(2),e.Y8G("ngIf",e.eq3(10,En,e.bMT(5,8,o.expandedWeeks$)))}}function Dn(n,a){if(1&n&&(e.j41(0,"div",12),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n){const r=a.$implicit,t=e.XpG(2);e.AVh("cal-past",r.isPast)("cal-today",r.isToday)("cal-future",r.isFuture)("cal-weekend",r.isWeekend),e.Y8G("ngClass",r.cssClass),e.R7$(1),e.SpI(" ",e.bMT(2,10,t.getDayTranslationKey(r.day))," ")}}function On(n,a){if(1&n&&(e.j41(0,"div",10),e.DNE(1,Dn,3,12,"div",11),e.k0s()),2&n){const r=a.days,t=a.trackByWeekDayHeaderDate;e.R7$(1),e.Y8G("ngForOf",r)("ngForTrackBy",t)}}let Pn=(()=>{var n;class a{constructor(t,o,i){this.showMoreService=t,this.mixpanelService=o,this.elementRef=i,this.weekStartsOn=1,this._subscribers=[]}ngOnInit(){this.expandedWeeks$=this.showMoreService.observe(),this.mixpanelService.onCalendarLoad(),this.scrollToToday$.subscribe(()=>setTimeout(()=>this.scrollIntoTodayView()))}getClassName(t){return{today:t.isToday,"not-in-month":!t.inMonth}}scrollIntoTodayView(){this.isMobile?function Ie(n,a,r=0){for(let t=0;t<a.length;t++){const o=n.nativeElement.querySelectorAll(a[t]),i=null!=o&&o.length?o[o.length-1]:void 0;if(i)return void se(i,r)}}(this.elementRef,[".day.today",".day.past"],-70):ie(this.elementRef,".cell.today",-120)}ngOnDestroy(){this._subscribers.forEach(t=>t.unsubscribe())}getDayTranslationKey(t){return`bullsheet.calendar.day${t}`}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(j),e.rXU($),e.rXU(e.aKT))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-trading-calendar"]],inputs:{viewDate:"viewDate",isMobile:"isMobile",events:"events",scrollToToday$:"scrollToToday$"},features:[e.Jv_([{provide:D.jc,useClass:dt},re.D,{provide:Y.r,useValue:"bdd-insights"},{provide:Y.w,useValue:ae.e},h.n])],decls:6,vars:2,consts:[["class","calendar",3,"viewDate","events","cellTemplate","weekStartsOn","headerTemplate",4,"ngIf"],["class","mobile-calendar",3,"viewDate","events","weekStartsOn",4,"ngIf"],["customCellTemplate",""],["headerTemplate",""],[1,"calendar",3,"viewDate","events","cellTemplate","weekStartsOn","headerTemplate"],[1,"mobile-calendar",3,"viewDate","events","weekStartsOn"],[1,"et-height-100","et-flex-column","cell",3,"ngClass"],[1,"day-number","ets-num-m","et-text-align-start",3,"ngClass"],[4,"ngIf"],["automation-id","economic-calendar-desktop-calendar-events",1,"events","et-width-100","et-height-100",3,"events","day","expandedWeeks"],["role","row",1,"cal-cell-row","cal-header","ets-info","ets-semi-bold"],["class","cal-cell","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell",3,"ngClass"]],template:function(t,o){1&t&&(e.DNE(0,Mn,1,5,"mwl-calendar-month-view",0),e.DNE(1,bn,1,3,"et-list-view-calendar",1),e.DNE(2,xn,6,12,"ng-template",null,2,e.C5r),e.DNE(4,On,2,2,"ng-template",null,3,e.C5r)),2&t&&(e.Y8G("ngIf",!o.isMobile),e.R7$(1),e.Y8G("ngIf",o.isMobile))},dependencies:[D.jD,d.YU,d.Sq,d.bT,on,yn,D.Sz,d.Jj,h.n],styles:['.mobile-calendar[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;min-height:0;overflow-y:auto}.calendar[_ngcontent-%COMP%]{width:100%;height:100%;display:block;background-color:var(--neutral-secondary-bg)}.calendar[_ngcontent-%COMP%]     mwl-calendar-month-view-header{position:sticky;width:100%;z-index:4;top:60px}.calendar[_ngcontent-%COMP%]     .cal-month-view{background-color:var(--neutral-secondary-bg);height:100%;display:flex;flex-direction:column}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-day-cell{min-height:144px}.calendar[_ngcontent-%COMP%]     .cal-cell-row{background-color:var(--neutral-secondary-bg);gap:30px}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-cell-row .cal-cell:hover, .calendar[_ngcontent-%COMP%]     .cal-month-view .cal-cell.cal-has-events.cal-open, .calendar[_ngcontent-%COMP%]     .cal-month-view .cal-day-cell.cal-today{background-color:var(--neutral-secondary-bg);cursor:auto}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-header{text-align:left;color:var(--secondary-neutral-text);font-weight:600;gap:30px;overflow:hidden;background-color:var(--neutral-secondary-bg)}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-day-cell{background-color:var(--neutral-secondary-bg);border-left:0;border-right:0}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-days{border:0;padding-inline-end:4px}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-days .cal-cell-row{border:0;background-color:var(--neutral-secondary-bg)}.calendar[_ngcontent-%COMP%]     .cal-month-view .cal-header .cal-cell{background-color:var(--neutral-secondary-bg);padding-block-end:24px}.cell[_ngcontent-%COMP%]{align-items:flex-start}.cell[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{padding-block-end:18px;color:var(--primary-neutral-text)}.cell[_ngcontent-%COMP%]   .day-number.not-in-month[_ngcontent-%COMP%]{color:var(--tertiary-neutral-text)}.cell[_ngcontent-%COMP%]   .events[_ngcontent-%COMP%]{display:block;min-height:150px;padding-block-end:30px}.cell.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:var(--brand-hover-action-text)}.cell.today[_ngcontent-%COMP%]:before{border-top-color:var(--brand-hover-action-text);border-top-width:3px}.cell[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;border-top:1px solid var(--secondary-divider);margin-block-end:18px}'],changeDetection:0}),a})();function Tn(n,a){if(1&n){const r=e.RV6();e.j41(0,"a",6),e.bIt("click",function(){const i=e.eBV(r).index,l=e.XpG();return e.Njj(l.onMonthClicked(i))})("mouseenter",function(){const i=e.eBV(r).index,l=e.XpG();return e.Njj(l.onMonthMouseEnter(i))})("mouseleave",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.onMonthMouseLeave())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}if(2&n){const r=a.index,t=e.XpG();e.Y8G("ngClass",t.getMonthClassName(r)),e.BMQ("automation-id","economic-calendar-month-picker-month-"+r),e.R7$(1),e.SpI(" ",e.bMT(2,3,t.generateMonthsDisplayNames(r)),"")}}let In=(()=>{var n;class a{set selectedDate(t){this.monthPickerService.updateSelection(t.getMonth(),t.getFullYear())}constructor(t){this.monthPickerService=t,this.OnDateSelected=new e.bkB,this.monthHovered=null}ngOnInit(){this.months=this.generateMonths(),this.viewedYear=this.monthPickerService.selectedYear}onMonthClicked(t){this.monthPickerService.updateSelection(t,this.viewedYear),this.OnDateSelected.emit(this.createDate(t,this.viewedYear))}changeYear(t){this.viewedYear+=t}onMonthMouseEnter(t){this.monthHovered=t}onMonthMouseLeave(){this.monthHovered=null}createDate(t,o){return new Date(Date.UTC(o,t))}getMonthClassName(t){return{active:t===this.monthPickerService.selectedMonth&&this.monthPickerService.selectedYear===this.viewedYear,today:t===this.monthPickerService.today.month&&this.viewedYear===this.monthPickerService.today.year,hover:t===this.monthHovered,mobile:this.isMobile}}generateMonthsDisplayNames(t){return`monthNames.short${t+1}`}generateMonths(){return new Array(12).fill(6)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(fe))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-month-picker"]],inputs:{selectedDate:"selectedDate",isMobile:"isMobile"},outputs:{OnDateSelected:"OnDateSelected"},decls:7,vars:2,consts:[[1,"month-picker-header","et-flex-between"],["automation-id","economic-calendar-month-picker-previous-month-button",1,"arrow","ets-chip","ets-icon-direction-left","et-flex-center",3,"click"],["automation-id","economic-calendar-month-picker-year-text",1,"ets-title-card","et-flex-center"],["automation-id","economic-calendar-month-picker-next-month-button",1,"arrow","ets-chip","ets-icon-direction-right","et-flex-center",3,"click"],[1,"month-picker-months"],["class","month-picker-month ets-chip et-flex-center et-text-align-center ets-info ets-semi-bold et-color-black",3,"ngClass","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"month-picker-month","ets-chip","et-flex-center","et-text-align-center","ets-info","ets-semi-bold","et-color-black",3,"ngClass","click","mouseenter","mouseleave"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"a",1),e.bIt("click",function(){return o.changeYear(-1)}),e.k0s(),e.j41(2,"div",2),e.EFF(3),e.k0s(),e.j41(4,"a",3),e.bIt("click",function(){return o.changeYear(1)}),e.k0s()(),e.j41(5,"div",4),e.DNE(6,Tn,3,5,"a",5),e.k0s()),2&t&&(e.R7$(3),e.SpI("",o.viewedYear," "),e.R7$(3),e.Y8G("ngForOf",o.months))},dependencies:[d.YU,d.Sq,A.D],styles:[".month-picker-header[_ngcontent-%COMP%]{padding:24px;direction:ltr}.month-picker-header[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{min-height:30px;min-width:30px;padding:0 10px}.month-picker-months[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;padding-block-end:30px;gap:12px;padding-inline:24px}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month[_ngcontent-%COMP%]{border-radius:100px;padding-inline:26px;padding-block:22px;border:1px solid transparent;color:var(--primary-neutral-text);cursor:pointer;width:unset}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month.today[_ngcontent-%COMP%]{background-color:var(--positive-tertiary-bg)}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month.active[_ngcontent-%COMP%]{background-color:var(--info-action-text);color:var(--neutral-secondary-bg)}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month.hover[_ngcontent-%COMP%]{border-color:var(--static-neutral-40)}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month.hover.active[_ngcontent-%COMP%]{border-color:var(--info-action-text)}.month-picker-months[_ngcontent-%COMP%]   .month-picker-month.mobile[_ngcontent-%COMP%]{padding-inline:0}"],changeDetection:0}),a})();function wn(n,a){if(1&n){const r=e.RV6();e.j41(0,"a",2),e.bIt("click",function(){const i=e.eBV(r).$implicit,l=e.XpG();return e.Njj(l.onFilterClicked(i.key))}),e.nI1(1,"lowercase"),e.EFF(2),e.nI1(3,"translateLazy"),e.k0s()}if(2&n){const r=a.$implicit,t=e.XpG();e.Y8G("ngClass",t.getFiltersClassName(r.key)),e.BMQ("automation-id",e.bMT(1,3,"economic-calendar-filter-button-"+r.key+(r.value?"-active":""))),e.R7$(2),e.SpI(" ",e.bMT(3,5,t.getFilterDisplayName(r.key))," ")}}let Sn=(()=>{var n;class a{constructor(){this.filterChanged=new e.bkB,this.originalOrderComparator=(t,o)=>0,this._filterToDisplayNameMapping={[u.Portfolio]:"bullsheet.calendar.myPortfolio",[u.PopularStocks]:"bullsheet.calendar.popularStocks",[u.Watchlists]:"bullsheet.eh.watchlists"}}onFilterClicked(t){this.filterChanged.emit(t)}getFilterDisplayName(t){return this._filterToDisplayNameMapping[t]}getFiltersClassName(t){return{"ets-active":this.filters[t]}}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-events-filter"]],inputs:{filters:"filters"},outputs:{filterChanged:"filterChanged"},decls:3,vars:4,consts:[[1,"et-flex"],["class","ets-chip",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"ets-chip",3,"ngClass","click"]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.DNE(1,wn,4,7,"a",1),e.nI1(2,"keyvalue"),e.k0s()),2&t&&(e.R7$(1),e.Y8G("ngForOf",e.i5U(2,1,o.filters,o.originalOrderComparator)))},dependencies:[d.YU,d.Sq,d.GH,d.lG,h.n],styles:[".ets-chip[_ngcontent-%COMP%] + .ets-chip[_ngcontent-%COMP%]{margin-inline-start:12px}"],changeDetection:0}),a})();const Fn=["tooltipTemplateEarnings"],Rn=["tooltipTemplateDivPayment"],$n=["tooltipTemplateExDiv"];function Nn(n,a){if(1&n&&(e.j41(0,"div",4),e.nrm(1,"div",5),e.j41(2,"div",6),e.EFF(3),e.nI1(4,"translateLazy"),e.k0s()()),2&n){const r=a.$implicit,t=e.XpG();e.Y8G("etTooltip",t.getTooltipTemplate(r.key))("etTooltipShowDelay",400)("etTooltipDisabled",t.isOtherEvent(r.key)),e.BMQ("automation-id","economic-calendar-event-type-mapping-"+r.key),e.R7$(1),e.Y8G("ngClass",t.getTagClassName(r.key)),e.R7$(2),e.JRh(e.bMT(4,6,r.value))}}function Gn(n,a){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,r.getTooltipText(r.economicCalendarEventType.Earnings)))}}function Yn(n,a){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,r.getTooltipText(r.economicCalendarEventType.Dividend)))}}function Un(n,a){if(1&n&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&n){const r=e.XpG();e.R7$(1),e.JRh(e.bMT(2,1,r.getTooltipText(r.economicCalendarEventType.ExDividend)))}}let jn=(()=>{var n;class a{constructor(){this.economicCalendarEventType=s,this.originalOrderComparator=(t,o)=>0}ngOnInit(){this._templatesMapping={[s.Dividend]:this.tooltipTemplateDivPayment,[s.Earnings]:this.tooltipTemplateEarnings,[s.ExDividend]:this.tooltipTemplateExDiv,[s.Other]:null}}getTagClassName(t){return t}getEventTypeMapping(){return q}getTooltipTemplate(t){return this._templatesMapping[t]}getTooltipText(t){return bt[t]}isOtherEvent(t){return t===s.Other}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-calendar-event-type-map"]],viewQuery:function(t,o){if(1&t&&(e.GBs(Fn,7),e.GBs(Rn,7),e.GBs($n,7)),2&t){let i;e.mGM(i=e.lsd())&&(o.tooltipTemplateEarnings=i.first),e.mGM(i=e.lsd())&&(o.tooltipTemplateDivPayment=i.first),e.mGM(i=e.lsd())&&(o.tooltipTemplateExDiv=i.first)}},decls:8,vars:4,consts:[["class","et-flex mapping-event-type",3,"etTooltip","etTooltipShowDelay","etTooltipDisabled",4,"ngFor","ngForOf"],["tooltipTemplateEarnings",""],["tooltipTemplateDivPayment",""],["tooltipTemplateExDiv",""],[1,"et-flex","mapping-event-type",3,"etTooltip","etTooltipShowDelay","etTooltipDisabled"],[1,"type-map-tag",3,"ngClass"],[1,"event-type-name","ets-secondary-info","ets-semi-bold","et-text-align-center"]],template:function(t,o){1&t&&(e.DNE(0,Nn,5,8,"div",0),e.nI1(1,"keyvalue"),e.DNE(2,Gn,3,3,"ng-template",null,1,e.C5r),e.DNE(4,Yn,3,3,"ng-template",null,2,e.C5r),e.DNE(6,Un,3,3,"ng-template",null,3,e.C5r)),2&t&&e.Y8G("ngForOf",e.i5U(1,1,o.getEventTypeMapping(),o.originalOrderComparator))},dependencies:[d.YU,d.Sq,K.dg,d.lG,h.n],styles:[".mapping-event-type[_ngcontent-%COMP%]{align-items:baseline}.mapping-event-type[_ngcontent-%COMP%]   .event-type-name[_ngcontent-%COMP%]{margin-inline-start:.2rem;margin-inline-end:1rem;color:var(--primary-neutral-text)}.mapping-event-type[_ngcontent-%COMP%]   .type-map-tag[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:4px}.mapping-event-type[_ngcontent-%COMP%]   .type-map-tag.dividend[_ngcontent-%COMP%]{background-color:var(--brand-action-text)}.mapping-event-type[_ngcontent-%COMP%]   .type-map-tag.earnings[_ngcontent-%COMP%]{background-color:var(--secondary-100)}.mapping-event-type[_ngcontent-%COMP%]   .type-map-tag.ex-dividend[_ngcontent-%COMP%]{background-color:#fd8200}.mapping-event-type[_ngcontent-%COMP%]   .type-map-tag.other[_ngcontent-%COMP%]{background-color:#b89dfb}"],changeDetection:0}),a})(),Bn=(()=>{var n;class a{constructor(){this.todayClicked=new e.bkB}onClick(){this.todayClicked.emit()}getDisplayName(){return"bullsheet.calendar.today"}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-today-button"]],outputs:{todayClicked:"todayClicked"},decls:3,vars:3,consts:[[1,"ets-chip",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"a",0),e.bIt("click",function(){return o.onClick()}),e.EFF(1),e.nI1(2,"translateLazy"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,o.getDisplayName())))},dependencies:[h.n],changeDetection:0}),a})(),Vn=(()=>{var n;class a{constructor(){this.pickerClicked=new e.bkB}getPickerMonthDisplayName(){return function Mt(n){return`monthNames.full${n.getMonth()+1}`}(this.selectedDate)}getPickerYearDisplayName(){return`${this.selectedDate.getFullYear()}`}EmitPickerClicked(t){this.preventClosing(t),this.pickerClicked.emit(this.isMobile)}preventClosing(t){t.stopPropagation(),t.preventDefault()}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["et-picker-button"]],inputs:{isMobile:"isMobile",selectedDate:"selectedDate"},outputs:{pickerClicked:"pickerClicked"},decls:4,vars:4,consts:[["automation-id","economic-calendar-date-picker-button",1,"picker-button",3,"click"],["automation-id","economic-calendar-date-picker-icon-arrow-down",1,"icon-arrow-down","arrow"]],template:function(t,o){1&t&&(e.j41(0,"button",0),e.bIt("click",function(l){return o.EmitPickerClicked(l)}),e.EFF(1),e.nI1(2,"translate"),e.nrm(3,"i",1),e.k0s()),2&t&&(e.R7$(1),e.Lme("",e.bMT(2,2,o.getPickerMonthDisplayName())," ",o.getPickerYearDisplayName(),""))},dependencies:[A.D],styles:[".picker-button[_ngcontent-%COMP%]{margin-block:15px;display:flex;justify-content:flex-start;align-items:center;background-color:var(--neutral-secondary-bg);color:var(--almost-black);letter-spacing:-.4px;cursor:pointer;text-transform:capitalize;font-family:Open Sans,sans-serif;font-size:22px;font-weight:700;line-height:30px;text-align:start}.picker-button[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin-inline-start:4px;vertical-align:middle;font-size:13px;padding:1px 10px 0;line-height:1.2}"],changeDetection:0}),a})();const An=["mobileMonthPicker"];function Ln(n,a){1&n&&e.eu8(0)}function Xn(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-today-button",13),e.bIt("todayClicked",function(){e.eBV(r);const o=e.XpG().isMobile,i=e.XpG();return e.Njj(i.onTodayClicked(o))}),e.k0s()}if(2&n){const r=e.XpG().isMobile;e.AVh("mobile",r)}}function zn(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-month-picker",14),e.bIt("click",function(o){e.eBV(r);const i=e.XpG(2);return e.Njj(i.preventClosing(o))})("OnDateSelected",function(o){e.eBV(r);const i=e.XpG().isMobile,l=e.XpG();return e.Njj(l.onDateSelected(o,i))}),e.k0s()}if(2&n){const r=e.XpG(2);e.Y8G("selectedDate",r.selectedDate)}}function Hn(n,a){if(1&n){const r=e.RV6();e.j41(0,"et-month-picker",15),e.bIt("OnDateSelected",function(o){e.eBV(r);const i=e.XpG().isMobile,l=e.XpG();return e.Njj(l.onDateSelected(o,i))}),e.k0s()}if(2&n){const r=e.XpG(2);e.Y8G("selectedDate",r.selectedDate)}}function Wn(n,a){1&n&&e.nrm(0,"et-calendar-event-type-map",16)}function Qn(n,a){if(1&n&&e.nrm(0,"et-trading-calendar",17),2&n){const r=e.XpG(),t=r.isMobile,o=r.events,i=e.XpG();e.AVh("mobile",t),e.Y8G("events",o)("viewDate",i.selectedDate)("isMobile",t)("scrollToToday$",i.todayClicked$)}}function Jn(n,a){if(1&n){const r=e.RV6();e.j41(0,"div",2)(1,"header")(2,"div",3)(3,"et-picker-button",4),e.bIt("pickerClicked",function(){const i=e.eBV(r).isMobile,l=e.XpG();return e.Njj(l.onPickerClicked(i))}),e.k0s(),e.DNE(4,Xn,1,2,"et-today-button",5),e.DNE(5,zn,1,1,"et-month-picker",6),e.k0s(),e.DNE(6,Hn,1,1,"ng-template",null,7,e.C5r),e.j41(8,"div",8)(9,"et-events-filter",9),e.bIt("filterChanged",function(o){e.eBV(r);const i=e.XpG();return e.Njj(i.onFilterChange(o))}),e.k0s(),e.DNE(10,Wn,1,0,"et-calendar-event-type-map",10),e.k0s()(),e.j41(11,"main"),e.DNE(12,Qn,1,6,"et-trading-calendar",11),e.k0s(),e.nrm(13,"footer",12),e.k0s()}if(2&n){const r=a.isMobile,t=a.events,o=a.filters,i=e.XpG();e.FS9("dir",i.isRtl?"rtl":"ltr"),e.R7$(2),e.AVh("mobile",r),e.R7$(1),e.Y8G("isMobile",r)("selectedDate",i.selectedDate),e.R7$(1),e.Y8G("ngIf",!i.isCurrentMonthSelected()),e.R7$(1),e.Y8G("ngIf",!r&&i.isMonthPickerShown),e.R7$(4),e.AVh("mobile",r),e.Y8G("filters",o),e.R7$(1),e.Y8G("ngIf",!r),e.R7$(2),e.Y8G("ngIf",!!t&&!!o)}}const Kn=function(n,a,r){return{isMobile:n,events:a,filters:r}};let Zn=(()=>{var n;class a{onDocumentClick(t){this.isMonthPickerShown=!1}set selectedDate(t){this._selectedDate=t,this.calendarService.setSelectedYear(t.getFullYear())}get selectedDate(){return this._selectedDate}constructor(t,o,i,l,v,m,M,C,P,k){this.calendarService=t,this.breakpointsService=o,this.dialogService=i,this.showMoreService=l,this.loaderService=v,this.notificationService=m,this.mixpanelService=M,this.loggerService=C,this.localizeService=P,this.elementRef=k,this.todayClicked$=new Te.B,this.isMonthPickerShown=!1,this._today=new Date}ngOnInit(){this.isRtl=this.localizeService.isSupportedRtlLangues(this.localizeService.language),this.loaderService.show(),this.calendarService.init(this._today),this._selectedDate=this._today,this.events$=(0,X.z)([this.calendarService.getInstrumentEvents(),this.calendarService.getMarketEvents()]).pipe((0,g.T)(([t,o])=>[...t,...o]),(0,x.M)(t=>{this.mixpanelService.setEvents(t)}),(0,x.M)(()=>this.loaderService.hide()),(0,oe.W)(t=>{let o=(0,G.of)([]);try{this.loggerService.error({categories:["Economic Calendar"],message:JSON.stringify({error:t}),domain:T.SB.CustomerData})}catch{this.loggerService.error({categories:["Economic Calendar"],message:"Failed to load economic calendar events",domain:T.SB.CustomerData})}finally{this.loaderService.hide(),this.notificationService.connectionError()}return o})),this.filters$=this.calendarService.getCalendarFilters().pipe((0,x.M)(t=>this.mixpanelService.setFilters(t))),this.isMobile$=this.observeMobileBreakpoint().pipe((0,x.M)(t=>this.mixpanelService.setIsMobile(t)))}onDateSelected(t,o){this.updateDateSelected(t,o),ie(this.elementRef,".filters-and-mapping",-60),this.mixpanelService.onMonthSelected()}onMobilePickerClicked(){this.isMonthPickerShown=!this.isMonthPickerShown,this.isMonthPickerShown&&this.openDialog()}onPickerClicked(t){if(!t)return this.isMonthPickerShown=!this.isMonthPickerShown,void(this.isMonthPickerShown&&this.mixpanelService.onMonthPickerOpened());this.onMobilePickerClicked()}preventClosing(t){t.stopPropagation(),t.preventDefault()}isCurrentMonthSelected(){return this._today.getMonth()===this._selectedDate.getMonth()&&this._today.getFullYear()===this._selectedDate.getFullYear()}openDialog(){this.dialogService.open(this.mobileMonthPicker,{disableClose:!1,openStyle:Pe.GB.bottom,panelClass:"et-width-100",width:"100%",height:"fit-content"}),this.mixpanelService.onMonthPickerOpened()}onTodayClicked(t){this.updateDateSelected(this._today,t),this.todayClicked$.next(),this.mixpanelService.onTodayPillCicked()}onFilterChange(t){this.calendarService.setCalendarFilters([t]),this.mixpanelService.onFilterClicked(t)}updateDateSelected(t,o){this.showMoreService.resetAll(),this.selectedDate=t,o?this.dialogService.closeAll():this.isMonthPickerShown=!this.isMonthPickerShown}observeMobileBreakpoint(){return(0,X.z)([this.breakpointsService.observe(L.r.Mobile),this.breakpointsService.observe(L.r.Tablet)]).pipe((0,g.T)(t=>t.some(o=>o.matches)))}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(ot),e.rXU(L.M),e.rXU(ue.o3),e.rXU(j),e.rXU(he.Z),e.rXU(at.s),e.rXU($),e.rXU(Q.g),e.rXU(Ce.X),e.rXU(e.aKT))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-economic-calendar"]],viewQuery:function(t,o){if(1&t&&e.GBs(An,5),2&t){let i;e.mGM(i=e.lsd())&&(o.mobileMonthPicker=i.first)}},hostBindings:function(t,o){1&t&&e.bIt("click",function(l){return o.onDocumentClick(l)},!1,e.EBC)},features:[e.Jv_([re.D,{provide:Y.r,useValue:"bdd-insights"},{provide:Y.w,useValue:ae.e},h.n])],decls:6,vars:12,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["economicCalendar",""],[1,"page",3,"dir"],[1,"et-text-align-start","et-flex","et-width-100","fixed-header"],[3,"isMobile","selectedDate","pickerClicked"],["class","today-button","automation-id","economic-calendar-today-button",3,"mobile","todayClicked",4,"ngIf"],["class","et-bg-white month-picker",3,"selectedDate","click","OnDateSelected",4,"ngIf"],["mobileMonthPicker",""],[1,"filters-and-mapping","et-flex-between","et-width-100"],[1,"filters",3,"filters","filterChanged"],["class","et-flex-start et-flex-align-center",4,"ngIf"],["class","calendar",3,"mobile","events","viewDate","isMobile","scrollToToday$",4,"ngIf"],[1,"footer"],["automation-id","economic-calendar-today-button",1,"today-button",3,"todayClicked"],[1,"et-bg-white","month-picker",3,"selectedDate","click","OnDateSelected"],[1,"mobile-month-picker","et-width-100",3,"selectedDate","OnDateSelected"],[1,"et-flex-start","et-flex-align-center"],[1,"calendar",3,"events","viewDate","isMobile","scrollToToday$"]],template:function(t,o){if(1&t&&(e.DNE(0,Ln,1,0,"ng-container",0),e.nI1(1,"async"),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,Jn,14,12,"ng-template",null,1,e.C5r)),2&t){const i=e.sdS(5);e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.sMw(8,Kn,e.bMT(1,2,o.isMobile$),e.bMT(2,4,o.events$),e.bMT(3,6,o.filters$)))}},dependencies:[Pn,d.bT,d.T3,In,Sn,jn,Bn,Vn,d.Jj],styles:[".mobile-month-picker[_ngcontent-%COMP%]{display:block;background-color:var(--neutral-secondary-bg);border-top-left-radius:20px;border-top-right-radius:20px;padding-block-end:1px}  .dialog-container{width:100%;border-radius:50px}[_nghost-%COMP%]{font-family:general-font,Arial,sans-serif;height:100%;width:100%;display:flex;flex-direction:column;background-color:var(--neutral-secondary-bg);background-repeat:repeat-y;padding-inline:20px;overflow:scroll}[_nghost-%COMP%]   .rtl-direction[_nghost-%COMP%], .rtl-direction   [_nghost-%COMP%]{direction:rtl}@media screen and (max-width: 740px){[_nghost-%COMP%]{padding-inline:24px}}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .fixed-header[_ngcontent-%COMP%]{position:fixed;background-color:var(--neutral-secondary-bg);z-index:1001;top:60px;width:90%;margin-top:11px}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .fixed-header.mobile[_ngcontent-%COMP%]{margin-top:0;width:100%;padding-inline-end:24px}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .fixed-header[_ngcontent-%COMP%]   .today-button[_ngcontent-%COMP%]{margin-block:auto;margin-inline-start:24px}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .fixed-header[_ngcontent-%COMP%]   .today-button.mobile[_ngcontent-%COMP%]{margin-inline-end:24px;margin-inline-start:auto}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .month-picker[_ngcontent-%COMP%]{position:fixed;display:block;box-shadow:2px 2px 10px 2px rgba(var(--rgb-neutral-100),.1);border-radius:12px;z-index:5;margin-block-start:60px}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .filters-and-mapping[_ngcontent-%COMP%]{flex-wrap:nowrap;margin-top:60px;z-index:999;position:relative}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}[_nghost-%COMP%]   .page[_ngcontent-%COMP%]   .filters.mobile[_ngcontent-%COMP%]{margin-inline-end:24px;margin-block-end:18px;margin-left:-24px;margin-right:-24px;padding-left:24px}[_nghost-%COMP%]   .calendar[_ngcontent-%COMP%]{display:block;min-height:0;margin-block-start:30px}[_nghost-%COMP%]   .calendar.mobile[_ngcontent-%COMP%]{margin-block-start:14px}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{padding-block-end:42px}"],changeDetection:0}),a})();var b=function(n){return n.ReadyToListen="readyToListen",n.PortfolioInstrumentIds="portfolioInstrumentIds",n.DataLoaded="dataLoaded",n.DataLoadFailed="dataLoadFailed",n.Url="url",n.Trade="trade",n.ModalOpened="modalOpened",n.ModalClosed="modalClosed",n.RateChanged="rateChanged",n}(b||{}),qn=c(64334),eo=c(33614),to=c(61801),no=c(80624),oo=c(8108);const ro=["iframe"];function ao(n,a){1&n&&(e.j41(0,"div",3),e.nrm(1,"div",4),e.k0s())}function io(n,a){if(1&n&&(e.nrm(0,"iframe",5,6),e.nI1(2,"safe")),2&n){const r=e.XpG();e.Y8G("src",e.i5U(2,1,r.iframeUrl,"resourceUrl"),e.f$h)}}let so=(()=>{var n;class a{onPostMessage(t){this._receivedMessageHandlerBinder(t)}constructor(t,o,i,l,v,m,M,C,P,k,S,E,te){this.authService=t,this.ref=o,this.config=i,this.pubSubService=l,this.percentageParserPipe=v,this.oldFormatRatePipe=m,this.localizeService=M,this.loggerService=C,this.ratesFactory=P,this.portfolioFacade=k,this.$location=S,this.instrumentsFactory=E,this.themeService=te,this.isLoading=!0,this.rateInstrumentIds=new Set}ngOnInit(){this.iframeUrl=this._getIframeUrl(),this.ref.markForCheck(),this._handleMessages()}ngOnDestroy(){this._rateSubscription&&this._rateSubscription.unsubscribe()}_getIframeUrl(){return`${this.iframeBaseUrl}/${this.userCID}/${this.languageCode}?theme=${this.themeService.state}`}_hideLoader(){this.isLoading=!1,this.ref.markForCheck()}_receivedMessageHandler(t){let o;if(null!=t&&t.data){try{o=JSON.parse(t.data)}catch{return}const i=this._receivedMessageHandlers[o.type];i&&this._safeApply(i,o)}}_handleMessages(){this._receivedMessageHandlerBinder=this._receivedMessageHandler.bind(this),this._receivedMessageHandlers={[b.ReadyToListen]:this._readyToListenHandler.bind(this),[b.DataLoaded]:this._dataLoadedHandler.bind(this),[b.DataLoadFailed]:this._dataLoadFailedHandler.bind(this),[b.Url]:this._urlHandler.bind(this),[b.Trade]:this._tradeHandler.bind(this),[b.ModalOpened]:this._modalOpenedHandler.bind(this),[b.ModalClosed]:this._modalClosedHandler.bind(this)}}_safeApply(t,...o){if("function"==typeof t)try{t.apply(this,Array.prototype.slice.call([t,...o],1))}catch{}}_readyToListenHandler(){var t;const o=null===(t=this.iframe)||void 0===t?void 0:t.nativeElement;if(o)try{this._getPortfolioInstrumentIds().pipe((0,qn.s)(1)).subscribe(i=>{o.contentWindow.postMessage(JSON.stringify({type:b.PortfolioInstrumentIds,params:{instrumentIds:i}}),this.iframeBaseUrl)})}catch{this.loggerService.error({categories:["Economic Calendar Iframe"],message:"Error sending data to Bullsheet",domain:T.SB.CustomerData})}}_dataLoadedHandler(){this._hideLoader()}_dataLoadFailedHandler(){this._hideLoader(),this.loggerService.error({categories:["Economic Calendar Iframe"],domain:T.SB.CustomerData,message:"Error loading data from Bullsheet"})}_urlHandler(t){var o;const i=null==t||null===(o=t.params)||void 0===o?void 0:o.ticker;i&&this.$location.path(`/markets/${i}`)}_tradeHandler(t){var o;const i=null==t||null===(o=t.params)||void 0===o?void 0:o.ticker;if(i){const l=this.instrumentsFactory.getBySymbol(i);null==l||l.buy()}}_modalOpenedHandler(t){var o;const i=this.instrumentsFactory.getById(null==t||null===(o=t.params)||void 0===o?void 0:o.instrumentId);i&&this._subscribeToRateChanges(i)}_modalClosedHandler(t){var o;const i=null==t||null===(o=t.params)||void 0===o?void 0:o.instrumentId;null!==i&&this._unsubscribeFromRateChanges(i)}_subscribeToRateChanges(t){this.rateInstrumentIds.add(t.InstrumentID),this.ratesFactory.subscribe({InstrumentID:t.InstrumentID}),(!this._rateSubscription||this._rateSubscription.closed)&&(this._rateSubscription=this.pubSubService.subscribe("Trading.Instrument.Rate",i=>{this.rateInstrumentIds.has(i.InstrumentID)&&this._sendRateChangeEvent(t)}))}_unsubscribeFromRateChanges(t){this.rateInstrumentIds.delete(t),this.rateInstrumentIds.size||this._rateSubscription.unsubscribe()}_sendRateChangeEvent(t){var o;const i=null===(o=this.iframe)||void 0===o?void 0:o.nativeElement;if(i)try{const l={type:b.RateChanged,params:{instrumentId:t.InstrumentID,price:+this.oldFormatRatePipe.transform(t.lastPrice(),t),change:this.percentageParserPipe.transform(t.rate.Change.bidPercent("Daily"))}};i.contentWindow.postMessage(JSON.stringify(l),this.iframeBaseUrl)}catch{}}_getPortfolioInstrumentIds(){return this.portfolioFacade.getInstrumentGroups$().pipe((0,g.T)(t=>t.map(o=>o.InstrumentID)))}get userCID(){return this.authService.user.realCID}get languageCode(){return this.localizeService.languageCode}get iframeBaseUrl(){return this.config.dynamics.eventsPage.iframeBaseUrl}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(eo.u),e.rXU(e.gRc),e.rXU(N.R),e.rXU(to.R),e.rXU(ke.Q),e.rXU(be.X),e.rXU(Ce.X),e.rXU(Q.g),e.rXU(no.f),e.rXU(pe.K),e.rXU("$location"),e.rXU("bl.factories.trading.instruments.instrumentsFactory"),e.rXU(xe.Fs))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-events"]],viewQuery:function(t,o){if(1&t&&e.GBs(ro,5),2&t){let i;e.mGM(i=e.lsd())&&(o.iframe=i.first)}},hostBindings:function(t,o){1&t&&e.bIt("message",function(l){return o.onPostMessage(l)},!1,e.tSv)},decls:3,vars:2,consts:[[1,"iframe-container"],["class","et-preloader-container",4,"ngIf"],["class","bs-iframe","automation-id","bs-events-iframe",3,"src",4,"ngIf"],[1,"et-preloader-container"],[1,"et-preloader"],["automation-id","bs-events-iframe",1,"bs-iframe",3,"src"],["iframe",""]],template:function(t,o){1&t&&(e.j41(0,"div",0),e.DNE(1,ao,2,0,"div",1),e.DNE(2,io,3,4,"iframe",2),e.k0s()),2&t&&(e.R7$(1),e.Y8G("ngIf",o.isLoading),e.R7$(1),e.Y8G("ngIf",o.iframeUrl))},dependencies:[d.bT,oo.m],styles:[".iframe-container[_ngcontent-%COMP%]{height:100%;width:100%;background:var(--neutral-secondary-bg)}.iframe-container[_ngcontent-%COMP%]   .et-preloader-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;height:100%;width:100%;top:0;left:0;background:rgba(var(--rgb-neutral-0),.8)}.iframe-container[_ngcontent-%COMP%]   .et-preloader-container[_ngcontent-%COMP%]   .et-preloader[_ngcontent-%COMP%]{height:50px;width:50px;background-size:100%}.iframe-container[_ngcontent-%COMP%]   .bs-iframe[_ngcontent-%COMP%]{height:100%;width:100%}.rtl-direction[_nghost-%COMP%]   .iframe-container[_ngcontent-%COMP%], .rtl-direction   [_nghost-%COMP%]   .iframe-container[_ngcontent-%COMP%]{direction:rtl}"],changeDetection:0}),a})();function lo(n,a){1&n&&e.nrm(0,"et-economic-calendar")}function co(n,a){1&n&&e.nrm(0,"et-events")}let vo=(()=>{var n;class a{constructor(t){this.config=t}ngOnInit(){this.isInsightsCalendar=this.config.dynamics.tradingInsights.calendarConfig.isInsightsCalendarv3}isBullsheet(){return!this.isInsightsCalendar}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(N.R))},n.\u0275cmp=e.VBU({type:n,selectors:[["et-economic-calendar-resolver"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(t,o){1&t&&(e.DNE(0,lo,1,0,"et-economic-calendar",0),e.DNE(1,co,1,0,"et-events",0)),2&t&&(e.Y8G("ngIf",!o.isBullsheet()),e.R7$(1),e.Y8G("ngIf",o.isBullsheet()))},dependencies:[d.bT,Zn,so],changeDetection:0}),a})()}}]);
//# sourceMappingURL=libs_trading-insights_src_index_ts.07f1582c884f56d8.js.map